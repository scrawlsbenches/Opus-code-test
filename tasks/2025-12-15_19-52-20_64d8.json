{
  "version": 1,
  "session_id": "64d8",
  "started_at": "2025-12-15T19:52:20.766321",
  "saved_at": "2025-12-15T19:52:20.766590",
  "tasks": [
    {
      "id": "T-20251215-195220-64d8-001",
      "title": "Implement OrchestrationPlan and Batch classes",
      "status": "pending",
      "priority": "high",
      "category": "feature",
      "description": "Create core orchestration classes in scripts/orchestration_utils.py:\n\n1. OrchestrationPlan class:\n   - plan_id generation (OP-YYYYMMDD-HHMMSS-XXXX format)\n   - title, goal, batches attributes\n   - save() with atomic writes (temp -> rename)\n   - load() class method\n\n2. Batch class:\n   - batch_id, name, batch_type (parallel|sequential)\n   - agents list, depends_on list\n   - status tracking\n\n3. Agent class:\n   - agent_id, task_type, description\n   - scope dict (files_read, files_write, constraints)\n   - status and result tracking\n\nFollow patterns from task_utils.py for ID generation and persistence.",
      "depends_on": [],
      "effort": "medium",
      "created_at": "2025-12-15T19:52:20.766370",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-002",
      "title": "Implement ExecutionTracker class",
      "status": "pending",
      "priority": "high",
      "category": "feature",
      "description": "Add ExecutionTracker to scripts/orchestration_utils.py:\n\n1. ExecutionTracker class:\n   - Links to an OrchestrationPlan\n   - execution_id generation\n   - start_batch(batch_id) method\n   - record_agent_result(agent_id, result) method\n   - complete_batch(batch_id, verification) method\n   - record_replan(trigger, old_plan, new_plan, reason) method\n\n2. AgentResult dataclass:\n   - status, started_at, completed_at\n   - duration_ms, output_summary\n   - files_modified, errors\n\n3. Persistence to .claude/orchestration/executions/",
      "depends_on": [
        "T-20251215-195220-64d8-001"
      ],
      "effort": "medium",
      "created_at": "2025-12-15T19:52:20.766381",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-003",
      "title": "Write unit tests for orchestration_utils.py",
      "status": "pending",
      "priority": "high",
      "category": "test",
      "description": "Create tests/unit/test_orchestration_utils.py:\n\nTest coverage requirements:\n1. OrchestrationPlan tests:\n   - ID generation format validation\n   - Add/remove batches\n   - Save/load round-trip\n   - Atomic write behavior\n\n2. Batch tests:\n   - Agent management\n   - Dependency tracking\n   - Status transitions\n\n3. ExecutionTracker tests:\n   - Batch lifecycle (start -> record -> complete)\n   - Agent result recording\n   - Replan event recording\n\n4. Edge cases:\n   - Empty plan\n   - Plan with no batches\n   - Load non-existent file\n\nTarget: >90% coverage of orchestration_utils.py",
      "depends_on": [
        "T-20251215-195220-64d8-001",
        "T-20251215-195220-64d8-002"
      ],
      "effort": "medium",
      "created_at": "2025-12-15T19:52:20.766387",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-004",
      "title": "Implement verify_batch.py script",
      "status": "pending",
      "priority": "high",
      "category": "feature",
      "description": "Create scripts/verify_batch.py for automated batch verification:\n\n1. verify_tests(quick=False) -> VerificationResult:\n   - Run smoke tests (quick=True) or full tests\n   - Capture pass/fail and test counts\n   - Return structured result\n\n2. verify_no_conflicts(modified_files) -> VerificationResult:\n   - Check no file modified by multiple agents\n   - Report conflicts if found\n\n3. verify_git_status() -> VerificationResult:\n   - Check for uncommitted .py files\n   - Report status summary\n\n4. run_verification(quick=False) -> BatchVerificationReport:\n   - Run all checks\n   - Aggregate results\n   - Return comprehensive report\n\n5. CLI interface:\n   --quick: smoke tests only\n   --check: specific check only\n   --json: JSON output\n\nUse subprocess for test running, reuse patterns from run_tests.py",
      "depends_on": [],
      "effort": "medium",
      "created_at": "2025-12-15T19:52:20.766394",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-005",
      "title": "Write unit tests for verify_batch.py",
      "status": "pending",
      "priority": "medium",
      "category": "test",
      "description": "Create tests for verify_batch.py:\n\n1. Test verify_no_conflicts():\n   - No conflicts case\n   - Single conflict case\n   - Multiple conflicts case\n\n2. Test verify_git_status():\n   - Clean status\n   - Modified files\n   - Untracked files\n\n3. Test run_verification():\n   - All pass case\n   - Mixed results case\n   - Integration with real git status\n\n4. Test CLI parsing:\n   - --quick flag\n   - --check option\n   - --json output\n\nNote: Use mocking for subprocess calls to avoid running actual tests",
      "depends_on": [
        "T-20251215-195220-64d8-004"
      ],
      "effort": "small",
      "created_at": "2025-12-15T19:52:20.766400",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-006",
      "title": "Implement OrchestrationMetrics class",
      "status": "pending",
      "priority": "medium",
      "category": "feature",
      "description": "Add metrics collection to scripts/orchestration_utils.py:\n\n1. OrchestrationMetrics class:\n   - metrics_file path (.claude/orchestration/metrics.jsonl)\n   - record(event_type, **kwargs): append to JSONL\n   - get_summary(): aggregate statistics\n   - get_failure_patterns(): analyze common failures\n\n2. Event types to support:\n   - batch_start, batch_complete\n   - agent_complete\n   - verification\n   - replan\n\n3. Metrics schema per event:\n   - timestamp, plan_id, event_type\n   - batch_id, duration_ms\n   - success flag, metadata dict\n\nFollow append-only pattern from ml_data_collector.py",
      "depends_on": [
        "T-20251215-195220-64d8-002"
      ],
      "effort": "small",
      "created_at": "2025-12-15T19:52:20.766406",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-007",
      "title": "Add task system integration",
      "status": "pending",
      "priority": "medium",
      "category": "feature",
      "description": "Add orchestration integration to scripts/task_utils.py:\n\n1. create_orchestration_tasks(plan, session) -> List[Task]:\n   - Create parent task for the plan\n   - Create child tasks for each batch\n   - Set depends_on relationships\n   - Link task IDs back to plan\n\n2. link_plan_to_task(plan_id, task_id) -> None:\n   - Update plan with task_links\n   - Update task with plan reference\n\n3. capture_batch_retrospective(plan_id, batch_id, metrics):\n   - Extract metrics for completed batch\n   - Format as retrospective\n   - Add to task\n\nIntegrate with existing TaskSession patterns",
      "depends_on": [
        "T-20251215-195220-64d8-001"
      ],
      "effort": "small",
      "created_at": "2025-12-15T19:52:20.766413",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-008",
      "title": "Update director command documentation",
      "status": "pending",
      "priority": "low",
      "category": "docs",
      "description": "Update .claude/commands/director.md with:\n\n1. New \"Execution Tracking\" section:\n   - How to initialize tracking\n   - Commands for batch lifecycle\n   - How to view metrics\n\n2. Quick reference table:\n   - orchestration_utils.py commands\n   - verify_batch.py commands\n\n3. Example workflow:\n   - Create plan\n   - Execute batches\n   - Verify and record results\n\nKeep existing content, add new sections appropriately",
      "depends_on": [
        "T-20251215-195220-64d8-004",
        "T-20251215-195220-64d8-006"
      ],
      "effort": "small",
      "created_at": "2025-12-15T19:52:20.766422",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    },
    {
      "id": "T-20251215-195220-64d8-009",
      "title": "Update CLAUDE.md with orchestration quick reference",
      "status": "pending",
      "priority": "low",
      "category": "docs",
      "description": "Add orchestration utilities to CLAUDE.md Quick Reference:\n\n1. Add to Quick Reference table:\n   | Create orchestration | `python scripts/orchestration_utils.py init \"title\"` |\n   | Start batch | `python scripts/orchestration_utils.py batch start B1` |\n   | Verify batch | `python scripts/verify_batch.py --quick` |\n   | View metrics | `python scripts/orchestration_utils.py metrics` |\n\n2. Add brief description in appropriate section\n\nKeep changes minimal and focused",
      "depends_on": [
        "T-20251215-195220-64d8-008"
      ],
      "effort": "small",
      "created_at": "2025-12-15T19:52:20.766429",
      "updated_at": null,
      "completed_at": null,
      "context": {},
      "retrospective": null
    }
  ]
}