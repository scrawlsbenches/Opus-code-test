{
  "id": "chat-20251216-013510-bd3b9f",
  "timestamp": "2025-12-16T00:49:50.032Z",
  "session_id": "6300c4a4-08a2-4833-b97d-bdf84396be64",
  "query": "How are we going to collect data to train a model?",
  "response": "Based on my review of the codebase, here's how the data collection pipeline works:\n\n## Data Collection Flow\n\n```\n┌─────────────────────────────────────────────────────────────────┐\n│                     AUTOMATIC COLLECTION                        │\n├─────────────────────────────────────────────────────────────────┤\n│                                                                 │\n│  SessionStart Hook          Post-Commit Hook       Stop Hook   │\n│  ┌──────────────┐          ┌──────────────┐     ┌───────────┐  │\n│  │ Start session│          │ Capture commit│     │ Process   │  │\n│  │ Install hooks│          │ metadata+diff │     │ transcript│  │\n│  │ Show stats   │          │ Link to chats │     │ Save chats│  │\n│  └──────────────┘          └──────────────┘     └───────────┘  │\n│         │                         │                    │        │\n│         ▼                         ▼                    ▼        │\n│  ┌─────────────────────────────────────────────────────────┐   │\n│  │                    .git-ml/ Storage                      │   │\n│  │  ┌─────────────┐ ┌──────────┐ ┌────────────────────────┐│   │\n│  │  │tracked/     │ │chats/    │ │commits/ (local only)   ││   │\n│  │  │commits.jsonl│ │YYYY-MM-DD│ │full diffs              ││   │\n│  │  │sessions.json│ │*.json    │ │                        ││   │\n│  │  └─────────────┘ └──────────┘ └────────────────────────┘│   │\n│  └─────────────────────────────────────────────────────────┘   │\n└─────────────────────────────────────────────────────────────────┘\n```\n\n## What Gets Collected\n\n| Data Type | Source | Contents |\n|-----------|--------|----------|\n| **Commits** | post-commit hook | Hash, message, files changed, insertions/deletions, branch, time of day |\n| **Chats** | Stop hook (transcript) | Query, response, files referenced/modified, tools used |\n| **Sessions** | SessionStart/Stop | Links commits to chats in the same session |\n| **CI Results** | GitHub Actions | Pass/fail, coverage percentage |\n\n## Training Milestones\n\nThe system tracks progress toward three training goals:\n\n```\n┌────────────────────┬─────────┬──────────┬────────┐\n│ Milestone          │ Commits │ Sessions │ Chats  │\n├────────────────────┼─────────┼──────────┼────────┤\n│ File Prediction    │ 500     │ 100      │ 200    │\n│ Commit Messages    │ 2,000   │ 500      │ 1,000  │\n│ Code Suggestions   │ 5,000   │ 2,000    │ 5,000  │\n└────────────────────┴─────────┴──────────┴────────┘\n```\n\n## Current Status\n\n```bash\npython scripts/ml_data_collector.py stats\n# Shows: 509 commits (lite), 9 chats, 0% toward goals\n```\n\n## Export for Training\n\nWhen ready, export in ML-friendly formats:\n\n```bash\n# JSONL (one record per line)\npython scripts/ml_data_collector.py export --format jsonl --output data.jsonl\n\n# HuggingFace Dataset format\npython scripts/ml_data_collector.py export --format huggingface --output data.json\n\n# CSV\npython scripts/ml_data_collector.py export --format csv --output data.csv\n```\n\n## Training Data Format\n\nEach exported record looks like:\n\n```json\n{\n  \"type\": \"chat\",\n  \"timestamp\": \"2025-12-16T00:21:44Z\",\n  \"input\": \"How do I fix the bug?\",\n  \"output\": \"You need to update line 42...\",\n  \"context\": {\n    \"files\": [\"bug.py\", \"test.py\"],\n    \"session_id\": \"e3079a20\",\n    \"tools_used\": [\"Read\", \"Edit\"]\n  }\n}\n```\n\n## The Path to a Trained Model\n\n1. **Collect** → Automatic via hooks (current phase)\n2. **Quality Check** → `python scripts/ml_data_collector.py quality-report`\n3. **Add Feedback** → `python scripts/ml_data_collector.py feedback --chat-id <id> --rating good`\n4. **Export** → When milestones reached, export training data\n5. **Fine-tune** → Use exported data to fine-tune a base model on this codebase\n\nThe system is designed to be zero-config and automatic - just develop normally and data accumulates over time.",
  "files_referenced": [],
  "files_modified": [],
  "tools_used": [],
  "user_feedback": null,
  "resulted_in_commit": false,
  "related_commit": null,
  "query_tokens": 11,
  "response_tokens": 445,
  "duration_seconds": null
}