{
  "hash": "9018eaa052f3fa5bd4dc97ccbbf486ef215a9ce6",
  "message": "Add Task #147: Fix misleading hardcoded values",
  "author": "Claude",
  "timestamp": "2025-12-12 10:43:47 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "TASK_LIST.md"
  ],
  "insertions": 44,
  "deletions": 1,
  "hunks": [
    {
      "file": "TASK_LIST.md",
      "function": null,
      "start_line": 1,
      "lines_added": [
        "**Completed Tasks:** 134+ (see archive and Recently Completed)"
      ],
      "lines_removed": [
        "**Completed Tasks:** 133+ (see archive and Recently Completed)"
      ],
      "context_before": [
        "# Task List: Cortical Text Processor",
        "",
        "Active backlog for the Cortical Text Processor project. Completed tasks are archived in [TASK_ARCHIVE.md](TASK_ARCHIVE.md).",
        "",
        "**Last Updated:** 2025-12-12",
        "**Pending Tasks:** 35"
      ],
      "context_after": [
        "",
        "---",
        "",
        "## Active Backlog",
        "",
        "<!-- Machine-parseable format for automation -->",
        "",
        "### ðŸ”´ Critical (Do Now)",
        "",
        "*All critical tasks completed!*"
      ],
      "change_type": "modify"
    },
    {
      "file": "TASK_LIST.md",
      "function": "Active backlog for the Cortical Text Processor project. Completed tasks are arch",
      "start_line": 74,
      "lines_added": [
        "| 147 | Fix misleading hardcoded values | 2025-12-12 | 5 fixes: backwards param names, sparsity threshold, config constant, tolerance param, confidence semantics |"
      ],
      "lines_removed": [],
      "context_before": [
        "| # | Task | Started | Notes |",
        "|---|------|---------|-------|",
        "| 87 | Add Python code samples and showcase | 2025-12-11 | samples/*.py created |",
        "",
        "---",
        "",
        "## Recently Completed (Last 7 Days)",
        "",
        "| # | Task | Completed | Notes |",
        "|---|------|-----------|-------|"
      ],
      "context_after": [
        "| 139 | Batch bigram connection updates to reduce dict overhead | 2025-12-12 | add_lateral_connections_batch() method in minicolumn.py |",
        "| 137 | Cap bigram connections to top-K per bigram | 2025-12-12 | max_connections_per_bigram parameter (default 50) in analysis.py |",
        "| 116 | Document return value semantics | 2025-12-12 | Edge cases, score ranges, None vs exceptions, default parameters |",
        "| 114 | Add type aliases for complex types | 2025-12-12 | cortical/types.py with 20+ aliases: DocumentScore, PassageResult, SemanticRelation, etc. |",
        "| 113 | Document staleness tracking system | 2025-12-12 | Comprehensive docs in CLAUDE.md: computation types, API, incremental updates |",
        "| 96 | Centralize duplicate constants | 2025-12-12 | cortical/constants.py with RELATION_WEIGHTS, DOC_TYPE_BOOSTS, query keywords |",
        "| 91 | Create docs/README.md index | 2025-12-12 | Navigation by audience, reading paths, categorized docs |",
        "| 92 | Add badges to README.md | 2025-12-12 | Python, License, Tests, Coverage, Zero Dependencies badges |",
        "| 93 | Update README with docs references | 2025-12-12 | Documentation section with table linking to docs/*.md |",
        "| 146 | Create behavioral tests for core user workflows | 2025-12-12 | 11 tests across 4 categories: Search, Performance, Quality, Robustness |"
      ],
      "change_type": "add"
    },
    {
      "file": "TASK_LIST.md",
      "function": "user outcomes, catching the kinds of issues discovered during dog-fooding.",
      "start_line": 1491,
      "lines_added": [
        "### 147. Fix Misleading Hardcoded Values âœ…",
        "",
        "**Meta:** `status:completed` `priority:high` `category:bugfix`",
        "**Files:** `cortical/query/definitions.py`, `cortical/layers.py`, `cortical/query/expansion.py`, `cortical/analysis.py`, `cortical/minicolumn.py`, `tests/test_layers.py`, `tests/test_query.py`",
        "**Effort:** Medium",
        "**Completed:** 2025-12-12",
        "",
        "**Problem:** Several hardcoded values in the codebase were misleading - they made something appear to be true when it wasn't.",
        "",
        "**Issues Fixed:**",
        "",
        "1. **Backwards parameter names** (`definitions.py:309-310`):",
        "   - `test_file_boost_factor=0.5` sounded like a boost but actually reduced scores by 50%",
        "   - `test_file_penalty=0.7` was called \"penalty\" but was lighter than the \"boost\"",
        "   - Renamed to `test_with_definition_penalty` and `test_without_definition_penalty`",
        "",
        "2. **Useless sparsity threshold** (`layers.py:192`):",
        "   - Hardcoded `threshold=1.0` only counted terms with activation=0 (unused terms)",
        "   - Changed to use `threshold_fraction * average_activation` for meaningful sparsity",
        "",
        "3. **Hardcoded config value** (`expansion.py:77`):",
        "   - Hardcoded `0.4` instead of using `DEFAULT_CHAIN_VALIDITY` constant",
        "   - Now imports and uses the config constant",
        "",
        "4. **Tolerance parameter ignored** (`analysis.py:301`):",
        "   - `compute_hierarchical_pagerank()` ignored caller's `tolerance` parameter",
        "   - Was hardcoded to `1e-6` instead of using the function parameter",
        "",
        "5. **Confidence only increasing** (`minicolumn.py:189`):",
        "   - Used `max(old, new)` so confidence could only increase, never decrease",
        "   - Changed to weighted average so confidence can decrease with lower-confidence evidence",
        "",
        "**Acceptance Criteria:**",
        "- [x] All misleading parameter names clarified",
        "- [x] Sparsity threshold made meaningful",
        "- [x] Config constants used consistently",
        "- [x] Function parameters respected (not ignored)",
        "- [x] Confidence semantics corrected",
        "- [x] All 1133 tests pass",
        "",
        "---",
        ""
      ],
      "lines_removed": [],
      "context_before": [
        "**Acceptance Criteria:**",
        "- [x] TestSearchBehavior class with 3+ tests",
        "- [x] TestPerformanceBehavior class with 2+ tests",
        "- [x] TestQualityBehavior class with 3+ tests (4 implemented)",
        "- [x] TestRobustnessBehavior class with 2+ tests",
        "- [x] All tests pass on current codebase",
        "- [x] Tests catch regressions from Tasks #141-145 if reverted",
        "",
        "---",
        ""
      ],
      "context_after": [
        "## Category Index",
        "",
        "| Category | Pending | Description |",
        "|----------|---------|-------------|",
        "| Perf | 1 | Performance improvements (#138) |",
        "| Arch | 6 | Architecture refactoring (#133, 134, 135, 95, 100, 101) |",
        "| CodeQual | 2 | Code quality improvements (#98, 99) |",
        "| Testing | 2 | Test coverage (#102, 129) |",
        "| TaskMgmt | 3 | Task management system (#107, 106, 108) |",
        "| AINav | 3 | AI assistant navigation (#115, 117, 118) |"
      ],
      "change_type": "add"
    }
  ],
  "hour_of_day": 10,
  "day_of_week": "Friday",
  "seconds_since_last_commit": -270061,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}