{
  "hash": "9a9fe3171087dc61115e33c22f72a46932b29824",
  "message": "Add new tasks from showcase review: bugs, fluent API, MCP server",
  "author": "Claude",
  "timestamp": "2025-12-13 02:41:20 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "TASK_ARCHIVE.md",
    "TASK_LIST.md"
  ],
  "insertions": 286,
  "deletions": 100,
  "hunks": [
    {
      "file": "TASK_ARCHIVE.md",
      "function": "Completed tasks moved from TASK_LIST.md. Search here for historical context and",
      "start_line": 76,
      "lines_added": [
        "| 87 | Add Python Code Samples and Showcase | Showcase | 2025-12-13 |",
        "| 88 | Create Package Installation Files | DevEx | 2025-12-11 |",
        "| 89 | Create CONTRIBUTING.md | DevEx | 2025-12-11 |",
        "| 90 | Create docs/quickstart.md | Docs | 2025-12-11 |",
        "| 91 | Create docs/README.md Index | Docs | 2025-12-12 |",
        "| 92 | Add Badges to README.md | DevEx | 2025-12-12 |",
        "| 93 | Update README with Docs References | Docs | 2025-12-12 |",
        "| 94 | Split query.py into Focused Modules | Architecture | 2025-12-12 |",
        "| 96 | Centralize Duplicate Constants | Code Quality | 2025-12-12 |",
        "| 97 | Integrate CorticalConfig into Processor | Architecture | 2025-12-11 |",
        "| 98 | Replace print() with Logging | Code Quality | 2025-12-12 |",
        "| 102 | Add Tests for Edge Cases | Testing | 2025-12-12 |",
        "| 103 | Add Priority Backlog Summary | Task Mgmt | 2025-12-11 |",
        "| 104 | Create TASK_ARCHIVE.md | Task Mgmt | 2025-12-11 |",
        "| 105 | Standardize Task Format | Task Mgmt | 2025-12-11 |",
        "| 109 | Add Recently Completed Section | Task Mgmt | 2025-12-11 |",
        "| 113 | Document Staleness Tracking System | Docs | 2025-12-12 |",
        "| 114 | Add Type Aliases for Complex Types | Code Quality | 2025-12-12 |",
        "| 115 | Create Component Interaction Diagram | Docs | 2025-12-12 |",
        "| 116 | Document Return Value Semantics | Docs | 2025-12-12 |",
        "| 119 | Create AI Metadata Generator Script | DevEx | 2025-12-11 |",
        "| 120 | Add AI Metadata Loader to Claude Skills | DevEx | 2025-12-11 |",
        "| 121 | Auto-regenerate AI Metadata on Changes | DevEx | 2025-12-11 |",
        "| 122 | Investigate Concept Layer Regressions | Research | 2025-12-11 |",
        "| 123 | Replace Label Propagation with Louvain | Algorithm | 2025-12-11 |",
        "| 124 | Add Minimum Cluster Count Tests | Testing | 2025-12-11 |",
        "| 125 | Add Clustering Quality Metrics | Algorithm | 2025-12-11 |",
        "| 126 | Investigate Louvain Resolution | Research | 2025-12-11 |",
        "| 127 | Create Cluster Coverage Evaluation Script | DevEx | 2025-12-11 |",
        "| 128 | Fix Definition Boost Test File Penalty | Bug Fix | 2025-12-11 |",
        "| 132 | Profile Full-Analysis Bottleneck | Performance | 2025-12-11 |",
        "| 136 | Optimize Semantics O(n¬≤) Similarity | Performance | 2025-12-11 |",
        "| 137 | Cap Bigram Connections to Top-K | Performance | 2025-12-12 |",
        "| 138 | Sparse Matrix for Bigram Connections | Performance | 2025-12-12 |",
        "| 139 | Batch Bigram Connection Updates | Performance | 2025-12-12 |",
        "| 141 | Filter Python Keywords from Analysis | Code Quality | 2025-12-12 |",
        "| 142 | Investigate compute_all() Regression | Performance | 2025-12-12 |",
        "| 143 | Investigate Negative Silhouette Score | Research | 2025-12-12 |",
        "| 144 | Boost Exact Document Name Matches | Search | 2025-12-12 |",
        "| 145 | Improve Graph Embedding Quality | Algorithm | 2025-12-12 |",
        "| 146 | Create Behavioral Tests | Testing | 2025-12-12 |",
        "| 147 | Fix Misleading Hardcoded Values | Bug Fix | 2025-12-12 |",
        "| 150 | Create Unit Test Fixtures and Mocks | Testing | 2025-12-12 |",
        "| 153 | Refactor query/* for Unit Testability | Testing | 2025-12-12 |",
        "| 154 | Add Unit Tests for query/* (partial) | Testing | 2025-12-12 |",
        "| 157 | Add Unit Tests for semantics.py | Testing | 2025-12-12 |",
        "| 158 | Add Unit Tests for persistence.py | Testing | 2025-12-12 |",
        "| 159 | Unit Tests for tokenizer.py | Unit Test | 2025-12-13 |",
        "| 160 | Unit Tests for embeddings.py | Unit Test | 2025-12-13 |",
        "| 161 | Unit Tests for layers.py | Unit Test | 2025-12-13 |",
        "| 162 | Unit Tests for minicolumn.py | Unit Test | 2025-12-13 |",
        "| 163 | Unit Tests for fingerprint.py | Unit Test | 2025-12-13 |",
        "| 164 | Unit Tests for gaps.py | Unit Test | 2025-12-13 |",
        "| 165-166 | Unit Tests for processor.py | Unit Test | 2025-12-13 |",
        "| 167 | Unit Tests for chunk_index.py | Unit Test | 2025-12-13 |",
        "| 168 | Unit Tests for config.py | Unit Test | 2025-12-13 |",
        "| 169 | Unit Tests for code_concepts.py | Unit Test | 2025-12-13 |",
        "| 170 | Unit Tests for query/expansion.py | Unit Test | 2025-12-13 |",
        "| 171 | Unit Tests for query/search.py | Unit Test | 2025-12-13 |",
        "| 172 | Unit Tests for query/passages.py | Unit Test | 2025-12-13 |",
        "| 173 | Unit Tests for query/definitions.py | Unit Test | 2025-12-13 |",
        "| 174 | Unit Tests for query/analogy.py | Unit Test | 2025-12-13 |",
        "| 175 | Unit Tests for query/ranking.py | Unit Test | 2025-12-13 |",
        "| 176 | Unit Tests for analysis.py | Unit Test | 2025-12-13 |",
        "| 177 | Unit Tests for semantics.py | Unit Test | 2025-12-13 |",
        "| 178 | Unit Tests for persistence.py | Unit Test | 2025-12-13 |"
      ],
      "lines_removed": [],
      "context_before": [
        "| 70 | Add Performance Timing to Showcase | Showcase | 2025-12-11 |",
        "| 71 | Enable Code-Aware Tokenization in Index | Code Index | 2025-12-11 |",
        "| 72 | Use Programming Query Expansion | Code Index | 2025-12-11 |",
        "| 77 | Add Interactive \"Ask the Codebase\" Mode | DevEx | 2025-12-11 |",
        "| 81 | Fix Tokenizer Underscore Identifiers | Code Search | 2025-12-11 |",
        "| 82 | Add Code Stop Words Filter | Code Search | 2025-12-11 |",
        "| 83 | Add Definition-Aware Boosting | Code Search | 2025-12-11 |",
        "| 84 | Add Direct Definition Pattern Search | Code Search | 2025-12-11 |",
        "| 85 | Improve Test vs Source File Ranking | Code Search | 2025-12-11 |",
        "| 86 | Add Semantic Chunk Boundaries for Code | Code Search | 2025-12-11 |"
      ],
      "context_after": [
        "",
        "---",
        "",
        "## Detailed Task History",
        "",
        "### Task 1: Fix Per-Document TF-IDF Calculation Bug ‚úì",
        "",
        "**File:** `cortical/analysis.py:131`",
        "**Completed:** 2025-12-10",
        ""
      ],
      "change_type": "add"
    },
    {
      "file": "TASK_LIST.md",
      "function": null,
      "start_line": 1,
      "lines_added": [
        "**Pending Tasks:** 50",
        "**Completed Tasks:** 178 (see archive)",
        "### üî¥ Critical (Bug Fixes - Do Now)",
        "| # | Task | Category | Depends | Effort |",
        "|---|------|----------|---------|--------|",
        "| 179 | Fix definition search showing wrong/truncated content | Bug | - | Small |",
        "| 180 | Fix doc-type boosting showing identical results | Bug | - | Small |",
        "| 181 | Fix \"distributed systems\" query ranking target doc 3rd | Bug | - | Small |",
        "| 182 | Create Fluent API for CorticalTextProcessor | API | - | Medium |",
        "| 183 | Add progress feedback during long operations | UX | - | Medium |",
        "| 184 | Implement MCP Server for Claude Desktop integration | Integration | - | Large |",
        "| 185 | Create result dataclasses (DocumentMatch, PassageMatch) | API | - | Medium |",
        "| 186 | Add simplified facade methods (quick_search, rag_retrieve) | API | 182 | Small |"
      ],
      "lines_removed": [
        "**Pending Tasks:** 42",
        "**Completed Tasks:** 170+ (see archive and Recently Completed)",
        "### üî¥ Critical (Do Now)",
        "*All critical tasks completed!*"
      ],
      "context_before": [
        "# Task List: Cortical Text Processor",
        "",
        "Active backlog for the Cortical Text Processor project. Completed tasks are archived in [TASK_ARCHIVE.md](TASK_ARCHIVE.md).",
        "",
        "**Last Updated:** 2025-12-13"
      ],
      "context_after": [
        "",
        "**Unit Test Initiative:** ‚úÖ COMPLETE - 85% coverage from unit tests (1,729 tests)",
        "- 19 modules at 90%+ coverage",
        "- See [Coverage Baseline](#unit-test-coverage-baseline) for per-module status",
        "",
        "---",
        "",
        "## Active Backlog",
        "",
        "<!-- Machine-parseable format for automation -->",
        "",
        "",
        "",
        "### üü† High (Do This Week)",
        "",
        "| # | Task | Category | Depends | Effort |",
        "|---|------|----------|---------|--------|",
        "| 148 | Investigate test_search_is_fast taking 137s | Testing | - | Medium |",
        "| 149 | Fix test_compute_all_under_threshold failing (135s > 30s) | Testing | - | Medium |",
        "",
        "### üü° Medium (Do This Month)",
        "",
        "| # | Task | Category | Depends | Effort |",
        "|---|------|----------|---------|--------|",
        "| 133 | Implement WAL + snapshot persistence (fault-tolerant rebuild) | Arch | 132 | Large |",
        "| 134 | Implement protobuf serialization for corpus | Arch | 132 | Medium |",
        "| 135 | Implement chunked parallel processing for full-analysis | Arch | 132 | Large |",
        "| 95 | Split processor.py into modules | Arch | 97 | Large |",
        "| 99 | Add input validation to public methods | CodeQual | - | Medium |",
        "| 107 | Add Quick Context to tasks | TaskMgmt | - | Medium |",
        "",
        "### üü¢ Low (Backlog)",
        "",
        "| # | Task | Category | Depends | Effort |"
      ],
      "change_type": "modify"
    },
    {
      "file": "TASK_LIST.md",
      "function": "Active backlog for the Cortical Text Processor project. Completed tasks are arch",
      "start_line": 63,
      "lines_added": [
        "| 46 | Standardize return types with dataclasses | Superseded by #185 |",
        "",
        "### üîÆ Future (Async/Advanced)",
        "",
        "| # | Task | Category | Notes |",
        "|---|------|----------|-------|",
        "| 187 | Add async API support (AsyncCorticalTextProcessor) | Architecture | Enables FastAPI, async frameworks |",
        "| 188 | Add streaming query results | Architecture | Depends on #187 |",
        "| 189 | Add observability hooks (timing, traces, metrics) | DevEx | OpenTelemetry integration |",
        "| 190 | Create REST API wrapper (FastAPI) | Integration | Depends on #187 |",
        "| 191 | Add Interactive REPL mode | DevEx | `python -m cortical --interactive` |",
        "*No tasks currently in progress*",
        "",
        "---",
        "",
        "## Recently Completed",
        "",
        "All completed tasks are now archived in [TASK_ARCHIVE.md](TASK_ARCHIVE.md).",
        "",
        "**Latest completions (2025-12-13):**",
        "- Unit Test Coverage Initiative: 1,729 tests, 85% coverage, 19 modules at 90%+",
        "- Tasks #159-178 (unit tests for all modules)",
        "### 179. Fix Definition Search Showing Wrong/Truncated Content",
        "**Meta:** `status:pending` `priority:critical` `category:bug`",
        "**Files:** `cortical/query/definitions.py`, `showcase.py`",
        "**Effort:** Small",
        "**Problem:** In showcase.py, definition search shows wrong content:",
        "- Query \"class DataProcessor\" ‚Üí shows \"etadata is None:...\" (truncated/wrong location)",
        "- Query \"def calculate_statistics\" ‚Üí shows \"records.clear()...\" (not the definition)",
        "",
        "**Root Cause:** `find_definition_passages()` returns wrong text positions or the first line extraction is incorrect.",
        "",
        "**Acceptance:**",
        "- [ ] \"class DataProcessor\" shows \"class DataProcessor:\" line",
        "- [ ] \"def calculate_statistics\" shows the actual function signature",
        "- [ ] Add regression test for definition search accuracy",
        "",
        "---",
        "",
        "### 180. Fix Doc-Type Boosting Showing Identical Results",
        "",
        "**Meta:** `status:pending` `priority:critical` `category:bug`",
        "**Files:** `cortical/query/search.py`, `showcase.py`",
        "**Effort:** Small",
        "",
        "**Problem:** Showcase shows identical results with/without boost:",
        "```",
        "Without doc-type boost: data_processor: 46.095",
        "With doc-type boost:    data_processor: 46.095 (same!)",
        "```",
        "**Root Cause:** `apply_doc_boost` parameter may not be wired correctly, or test files aren't present in results.",
        "",
        "**Acceptance:**",
        "- [ ] Boosted and non-boosted results show different scores",
        "- [ ] Test files visibly penalized (lower scores)",
        "- [ ] Add test verifying boost changes results",
        "",
        "---",
        "",
        "### 181. Fix Query Ranking for Exact Document Matches",
        "",
        "**Meta:** `status:pending` `priority:critical` `category:bug`",
        "**Files:** `cortical/query/search.py`, `cortical/query/ranking.py`",
        "**Effort:** Small",
        "",
        "**Problem:** Query \"distributed systems\" ranks:",
        "1. unix_evolution (19.96)",
        "2. database_design_patterns (16.81)",
        "3. distributed_systems (14.96) ‚Üê should be #1!",
        "",
        "**Root Cause:** doc_name_boost may be insufficient, or expansion terms are diluting the exact match.",
        "",
        "**Acceptance:**",
        "- [ ] Exact document name matches rank first",
        "- [ ] Add test: query matching doc name should return that doc first",
        "",
        "---",
        "",
        "### 182. Create Fluent API for CorticalTextProcessor",
        "",
        "**Meta:** `status:pending` `priority:high` `category:api`",
        "**Files:** `cortical/processor.py` or `cortical/fluent.py` (new)",
        "**Effort:** Medium",
        "",
        "**Problem:** Current API requires many chained calls:",
        "```python",
        "processor = CorticalTextProcessor()",
        "processor.process_document(\"doc1\", \"content\")",
        "processor.compute_all()",
        "results = processor.find_documents_for_query(\"query\", top_n=5)",
        "```",
        "",
        "**Solution:** Create fluent/chainable API:",
        "```python",
        "results = (CorticalTextProcessor()",
        "    .add_document(\"doc1\", \"content\")",
        "    .add_document(\"doc2\", \"more content\")",
        "    .build()  # Calls compute_all()",
        "    .search(\"query\", top_n=5))",
        "```",
        "**Acceptance:**",
        "- [ ] Fluent builder pattern implemented",
        "- [ ] Method chaining works for document addition",
        "- [ ] `.build()` returns searchable processor",
        "- [ ] Examples in quickstart.md",
        "",
        "---",
        "",
        "### 183. Add Progress Feedback During Long Operations",
        "",
        "**Meta:** `status:pending` `priority:high` `category:ux`",
        "**Files:** `cortical/processor.py`, `cortical/progress.py` (new)",
        "**Effort:** Medium",
        "",
        "**Problem:** `compute_all()` takes 148s with zero feedback. Users think the process crashed.",
        "",
        "**Solution:** Add progress callback support:",
        "```python",
        "def on_progress(phase: str, percent: float, elapsed: float):",
        "    print(f\"{phase}: {percent:.0f}% ({elapsed:.1f}s)\")",
        "",
        "processor.compute_all(progress_callback=on_progress)",
        "```",
        "",
        "**Phases to report:** tokenization, bigrams, semantics, pagerank, concepts, embeddings",
        "",
        "**Acceptance:**",
        "- [ ] Optional progress_callback parameter on compute_all()",
        "- [ ] CLI scripts show progress bar/spinner",
        "- [ ] < 1% performance overhead",
        "- [ ] Phase names and percentages accurate",
        "",
        "---",
        "",
        "### 184. Implement MCP Server for Claude Desktop Integration",
        "",
        "**Meta:** `status:pending` `priority:high` `category:integration`",
        "**Files:** `cortical/mcp_server.py` (new), `mcp_config.json` (new)",
        "**Effort:** Large",
        "",
        "**Problem:** AI agents must call subprocess scripts instead of native integration. Claude Desktop users can't access the processor directly.",
        "",
        "**Solution:** Create MCP (Model Context Protocol) server with tools:",
        "- `search(query, top_n)` ‚Üí document results",
        "- `passages(query, top_n)` ‚Üí RAG passages",
        "- `expand_query(query)` ‚Üí expansion terms",
        "- `corpus_stats()` ‚Üí statistics",
        "- `add_document(doc_id, content)` ‚Üí index document",
        "",
        "**Acceptance:**",
        "- [ ] Works in Claude Desktop",
        "- [ ] 5+ core tools implemented",
        "- [ ] Documentation for installation",
        "- [ ] Example MCP config file",
        "",
        "---",
        "",
        "### 185. Create Result Dataclasses",
        "",
        "**Meta:** `status:pending` `priority:medium` `category:api`",
        "**Files:** `cortical/results.py` (new), `cortical/query/*.py`",
        "**Effort:** Medium",
        "",
        "**Problem:** Results are tuples - `(text, doc_id, start, end, score)`. No IDE autocomplete, easy to mix up positions.",
        "",
        "**Solution:** Create dataclasses:",
        "```python",
        "@dataclass",
        "class DocumentMatch:",
        "    doc_id: str",
        "    score: float",
        "    metadata: Dict[str, Any] = None",
        "",
        "@dataclass",
        "class PassageMatch:",
        "    text: str",
        "    doc_id: str",
        "    line_start: int",
        "    line_end: int",
        "    score: float",
        "```",
        "",
        "**Acceptance:**",
        "- [ ] DocumentMatch, PassageMatch, QueryExpansion dataclasses",
        "- [ ] IDE autocomplete works",
        "- [ ] Backward compatible (old tuple access still works via __iter__)",
        "",
        "---",
        "",
        "### 186. Add Simplified Facade Methods",
        "",
        "**Meta:** `status:pending` `priority:medium` `category:api` `depends:182`",
        "**Files:** `cortical/processor.py`",
        "**Effort:** Small",
        "",
        "**Problem:** 80+ public methods; users don't know which to call for common tasks.",
        "",
        "**Solution:** Add purpose-focused facades:",
        "```python",
        "processor.quick_search(query)          # One-call document search",
        "processor.rag_retrieve(query, top_n=3) # Pre-configured for RAG",
        "processor.explore(query)               # With expansion visibility",
        "```",
        "**Acceptance:**",
        "- [ ] 3-4 facade methods added",
        "- [ ] Sensible defaults for each use case",
        "- [ ] Examples in quickstart.md"
      ],
      "lines_removed": [
        "| 46 | Standardize return types with dataclasses | Nice-to-have |",
        "| # | Task | Started | Notes |",
        "|---|------|---------|-------|",
        "| 87 | Add Python code samples and showcase | 2025-12-11 | samples/*.py created |",
        "",
        "",
        "## Recently Completed (Last 7 Days)",
        "",
        "| # | Task | Completed | Notes |",
        "|---|------|-----------|-------|",
        "| 159-178 | **Unit Test Coverage Initiative** | 2025-12-13 | 1,729 tests, 85% overall coverage, 19 modules at 90%+ |",
        "| 159 | Unit tests for tokenizer.py | 2025-12-13 | 77 tests, 99% coverage |",
        "| 160 | Unit tests for embeddings.py | 2025-12-13 | 72 tests, 98% coverage |",
        "| 161 | Unit tests for layers.py | 2025-12-13 | 70 tests, 99% coverage |",
        "| 162 | Unit tests for minicolumn.py | 2025-12-13 | 54 tests, 100% coverage |",
        "| 163 | Unit tests for fingerprint.py | 2025-12-13 | 61 tests, 99% coverage |",
        "| 164 | Unit tests for gaps.py | 2025-12-13 | 49 tests, 98% coverage |",
        "| 165-166 | Unit tests for processor.py | 2025-12-13 | 290 tests, 85% coverage |",
        "| 167 | Unit tests for chunk_index.py | 2025-12-13 | 82 tests, 98% coverage |",
        "| 168 | Unit tests for config.py | 2025-12-13 | 84 tests, 100% coverage |",
        "| 169 | Unit tests for code_concepts.py | 2025-12-13 | 78 tests, 98% coverage |",
        "| 170 | Unit tests for query/expansion.py | 2025-12-13 | 61 tests, 94% coverage |",
        "| 171 | Unit tests for query/search.py | 2025-12-13 | 52 tests, 95% coverage |",
        "| 172 | Unit tests for query/passages.py | 2025-12-13 | 94 tests, 92% coverage |",
        "| 173 | Unit tests for query/definitions.py | 2025-12-13 | 72 tests, 100% coverage |",
        "| 174 | Unit tests for query/analogy.py | 2025-12-13 | 55 tests, 90% coverage |",
        "| 175 | Unit tests for query/ranking.py | 2025-12-13 | 65 tests, 99% coverage |",
        "| 176 | Unit tests for analysis.py | 2025-12-13 | 140 tests, 94% coverage |",
        "| 177 | Unit tests for semantics.py | 2025-12-13 | 99 tests, 91% coverage |",
        "| 178 | Unit tests for persistence.py | 2025-12-13 | 76 tests, 94% coverage |",
        "| 157 | Add unit tests for semantics.py | 2025-12-12 | 48 tests, 24% coverage - superseded by #177 for 90% target |",
        "| 158 | Add unit tests for persistence.py | 2025-12-12 | 36 tests, 18% coverage - superseded by #178 for 90% target |",
        "| 153 | Refactor query/* for unit testability (partial) | 2025-12-12 | intent.py 72%, chunking.py 60% - remaining modules in #170-175 |",
        "| 154 | Add unit tests for query/* (partial) | 2025-12-12 | 67 tests for intent/chunking - remaining modules in #170-175 |",
        "| 150 | Create unit test fixtures and mocks for core data structures | 2025-12-12 | MockMinicolumn, MockHierarchicalLayer, MockLayers factory, LayerBuilder fluent API |",
        "| 138 | Use sparse matrix multiplication for bigram connections | 2025-12-12 | Zero-dep SparseMatrix class in analysis.py for O(n¬≤) ‚Üí O(n*k) improvement |",
        "| 98 | Replace print() with logging | 2025-12-12 | 52+ print statements ‚Üí logging.info(), all modules use getLogger(__name__) |",
        "| 102 | Add tests for edge cases | 2025-12-12 | 53 new tests in test_edge_cases.py: Unicode, large docs, malformed inputs |",
        "| 115 | Create component interaction diagram | 2025-12-12 | docs/architecture.md with ASCII + Mermaid diagrams, module dependencies |",
        "| 147 | Fix misleading hardcoded values | 2025-12-12 | 5 fixes: backwards param names, sparsity threshold, config constant, tolerance param, confidence semantics |",
        "| 139 | Batch bigram connection updates to reduce dict overhead | 2025-12-12 | add_lateral_connections_batch() method in minicolumn.py |",
        "| 137 | Cap bigram connections to top-K per bigram | 2025-12-12 | max_connections_per_bigram parameter (default 50) in analysis.py |",
        "| 116 | Document return value semantics | 2025-12-12 | Edge cases, score ranges, None vs exceptions, default parameters |",
        "| 114 | Add type aliases for complex types | 2025-12-12 | cortical/types.py with 20+ aliases: DocumentScore, PassageResult, SemanticRelation, etc. |",
        "| 113 | Document staleness tracking system | 2025-12-12 | Comprehensive docs in CLAUDE.md: computation types, API, incremental updates |",
        "| 96 | Centralize duplicate constants | 2025-12-12 | cortical/constants.py with RELATION_WEIGHTS, DOC_TYPE_BOOSTS, query keywords |",
        "| 91 | Create docs/README.md index | 2025-12-12 | Navigation by audience, reading paths, categorized docs |",
        "| 92 | Add badges to README.md | 2025-12-12 | Python, License, Tests, Coverage, Zero Dependencies badges |",
        "| 93 | Update README with docs references | 2025-12-12 | Documentation section with table linking to docs/*.md |",
        "| 146 | Create behavioral tests for core user workflows | 2025-12-12 | 11 tests across 4 categories: Search, Performance, Quality, Robustness |",
        "| 145 | Improve graph embedding quality for common terms | 2025-12-12 | Added 'tfidf' method, IDF weighting to 'fast' method |",
        "| 143 | Investigate negative silhouette score in clustering | 2025-12-12 | Expected behavior: modularity ‚â† silhouette (graph vs doc similarity) |",
        "| 142 | Investigate 74s compute_all() performance regression | 2025-12-12 | 5.2x speedup via fast embeddings + sampling (74s ‚Üí 14s) |",
        "| 144 | Boost exact document name matches in search | 2025-12-12 | doc_name_boost parameter in search functions |",
        "| 141 | Filter Python keywords/artifacts from analysis | 2025-12-12 | CODE_NOISE_TOKENS + filter_code_noise tokenizer option |",
        "| 94 | Split query.py into focused modules | 2025-12-12 | 8 modules: expansion, search, passages, chunking, intent, definitions, ranking, analogy |",
        "| 97 | Integrate CorticalConfig into processor | 2025-12-11 | Config stored on processor, used in method defaults, saved/loaded |",
        "| 127 | Create cluster coverage evaluation script | 2025-12-11 | scripts/evaluate_cluster.py with 24 tests |",
        "| 125 | Add clustering quality metrics (modularity, silhouette) | 2025-12-11 | compute_clustering_quality() in analysis.py, showcase display |",
        "| 124 | Add minimum cluster count regression tests | 2025-12-11 | 4 new tests: coherence, showcase count, mega-cluster, distribution |",
        "| 128 | Fix definition boost that favors test mocks over real implementations | 2025-12-11 | Added is_test_file() and test file penalty |",
        "| 132 | Profile full-analysis bottleneck (bigram, semantics O(n¬≤)) | 2025-12-11 | Created profile_full_analysis.py, fixed bottlenecks |",
        "| 136 | Optimize semantics O(n¬≤) similarity with early termination | 2025-12-11 | Added max_similarity_pairs, min_context_keys |",
        "| 126 | Investigate optimal Louvain resolution for sample corpus | 2025-12-11 | Research confirms default 1.0 is optimal |",
        "| 123 | Replace label propagation with Louvain community detection | 2025-12-11 | Implemented Louvain algorithm, 34 clusters for 92 docs |",
        "| 122 | Investigate Concept Layer & Embeddings regressions | 2025-12-11 | Fixed inverted strictness, improved embeddings |",
        "| 119 | Create AI metadata generator script | 2025-12-11 | scripts/generate_ai_metadata.py with tests |",
        "| 120 | Add AI metadata loader to Claude skills | 2025-12-11 | ai-metadata skill created |",
        "| 121 | Auto-regenerate AI metadata on changes | 2025-12-11 | Documented in CLAUDE.md, skills |",
        "| 88 | Create package installation files | 2025-12-11 | pyproject.toml, requirements.txt |",
        "| 89 | Create CONTRIBUTING.md | 2025-12-11 | Contribution guide |",
        "| 90 | Create docs/quickstart.md | 2025-12-11 | 5-minute tutorial |",
        "| 103 | Add Priority Backlog Summary | 2025-12-11 | TASK_LIST.md restructure |",
        "| 104 | Create TASK_ARCHIVE.md | 2025-12-11 | 75+ tasks archived |",
        "| 105 | Standardize task format | 2025-12-11 | Meta tags, effort estimates |",
        "| 109 | Add Recently Completed section | 2025-12-11 | Session context |",
        "| 86 | Add semantic chunk boundaries for code | 2025-12-11 | In query.py |",
        "| 85 | Improve test vs source ranking | 2025-12-11 | DOC_TYPE_BOOSTS |",
        "",
        "*Full details in [TASK_ARCHIVE.md](TASK_ARCHIVE.md)*",
        "### ~~150. Create Unit Test Fixtures and Mocks for Core Data Structures~~ ‚úì COMPLETED",
        "**Meta:** `status:completed` `priority:medium` `category:unit-test`",
        "**Files:** `tests/unit/mocks.py`, `tests/unit/test_mocks.py`",
        "**Completed:** 2025-12-12",
        "**Implementation Summary:**",
        "Created comprehensive test doubles (600+ lines) enabling isolated unit testing:",
        "1. **MockMinicolumn** - Full test double with all controllable attributes",
        "2. **MockHierarchicalLayer** - Supports get_minicolumn(), get_by_id(), column_count(), iteration",
        "3. **MockLayers Factory** - 10 factory methods:",
        "   - `empty()`, `single_term()`, `two_connected_terms()`, `connected_chain()`",
        "   - `complete_graph()`, `disconnected_terms()`, `document_with_terms()`",
        "   - `multi_document_corpus()`, `clustered_terms()`, `with_bigrams()`",
        "4. **LayerBuilder** - Fluent API: `with_term()`, `with_connection()`, `with_document()`, `with_cluster()`",
        "5. **Graph helpers** - `layers_to_graph()`, `layers_to_adjacency()` for algorithm testing",
        "**Verification:** 39 unit tests in test_mocks.py, all passing."
      ],
      "context_before": [
        "### ‚è∏Ô∏è Deferred",
        "",
        "| # | Task | Reason |",
        "|---|------|--------|",
        "| 110 | Add section markers to large files | Superseded by #119 (AI metadata generator) |",
        "| 111 | Add \"See Also\" cross-references | Superseded by #119 (AI metadata generator) |",
        "| 112 | Add docstring examples | Superseded by #119 (AI metadata generator) |",
        "| 7 | Document magic numbers in gaps.py | Low priority, functional as-is |",
        "| 42 | Add simple query language | Nice-to-have, not blocking |",
        "| 44 | Remove deprecated feedforward_sources | Cleanup, low impact |"
      ],
      "context_after": [
        "",
        "### üîÑ In Progress",
        "",
        "",
        "---",
        "",
        "## Pending Task Details",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "---",
        "",
        "## Unit Test Coverage Baseline",
        "",
        "‚úÖ **Unit test coverage as of 2025-12-13 (1,729 tests, 85% overall):**",
        "",
        "| Module | Coverage | Status | Task |",
        "|--------|----------|--------|------|",
        "| config.py | 100% | ‚úÖ | #168 |"
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 2,
  "day_of_week": "Saturday",
  "seconds_since_last_commit": -212608,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}