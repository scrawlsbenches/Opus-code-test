{
  "hash": "69c206b575122046867962c40de9676ca3927ec6",
  "message": "Fix test_retrofit_embeddings_invalid_alpha_zero to match new validation",
  "author": "Claude",
  "timestamp": "2025-12-13 11:21:44 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "tests/test_coverage_gaps.py"
  ],
  "insertions": 6,
  "deletions": 4,
  "hunks": [
    {
      "file": "tests/test_coverage_gaps.py",
      "function": "class TestSemanticsRetrofitCoverage(unittest.TestCase):",
      "start_line": 754,
      "lines_added": [
        "    def test_retrofit_embeddings_invalid_alpha_negative(self):",
        "        \"\"\"Test retrofit_embeddings raises ValueError when alpha < 0.\"\"\"",
        "        # alpha=0 is now valid (means 100% semantic, 0% original)",
        "        # Test negative alpha which is still invalid",
        "            retrofit_embeddings(embeddings, [], alpha=-0.1)",
        "        self.assertIn(\"between 0 and 1\", str(ctx.exception))"
      ],
      "lines_removed": [
        "    def test_retrofit_embeddings_invalid_alpha_zero(self):",
        "        \"\"\"Test retrofit_embeddings raises ValueError when alpha <= 0.\"\"\"",
        "            retrofit_embeddings(embeddings, [], alpha=0.0)",
        "        self.assertIn(\"exclusive of 0\", str(ctx.exception))"
      ],
      "context_before": [
        "        from cortical.semantics import retrofit_connections",
        "",
        "        processor = CorticalTextProcessor()",
        "        processor.process_document(\"doc1\", \"test content here\")",
        "        processor.compute_all(verbose=False)",
        "",
        "        with self.assertRaises(ValueError) as ctx:",
        "            retrofit_connections(processor.layers, [], alpha=-0.1)",
        "        self.assertIn(\"between 0 and 1\", str(ctx.exception))",
        ""
      ],
      "context_after": [
        "        from cortical.semantics import retrofit_embeddings",
        "",
        "        embeddings = {\"word1\": [0.1, 0.2], \"word2\": [0.3, 0.4]}",
        "",
        "        with self.assertRaises(ValueError) as ctx:",
        "",
        "    def test_retrofit_embeddings_invalid_alpha_too_high(self):",
        "        \"\"\"Test retrofit_embeddings raises ValueError when alpha > 1.\"\"\"",
        "        from cortical.semantics import retrofit_embeddings",
        "",
        "        embeddings = {\"word1\": [0.1, 0.2], \"word2\": [0.3, 0.4]}",
        "",
        "        with self.assertRaises(ValueError) as ctx:",
        "            retrofit_embeddings(embeddings, [], alpha=1.5)",
        "        self.assertIn(\"between 0 and 1\", str(ctx.exception))"
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 11,
  "day_of_week": "Saturday",
  "seconds_since_last_commit": -181384,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}