{
  "hash": "df7575071ccf28766af2e812d59fc7e7fdead3f6",
  "message": "docs: Add ML data collection section to README",
  "author": "Claude",
  "timestamp": "2025-12-15 13:44:48 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "README.md"
  ],
  "insertions": 89,
  "deletions": 0,
  "hunks": [
    {
      "file": "README.md",
      "function": "Capture and organize institutional knowledge alongside your code:",
      "start_line": 461,
      "lines_added": [
        "## ML Data Collection (Optional)",
        "",
        "**Help us build a smarter development assistant for this project.**",
        "",
        "This project includes optional infrastructure to collect development data—commit patterns, coding sessions, and query/response pairs—to train a **project-specific micro-model**. The goal: an AI assistant that understands *this* codebase's patterns, conventions, and workflows better than any general-purpose model.",
        "",
        "### Why This Matters",
        "",
        "General-purpose LLMs don't know your codebase. They don't know that `compute_all()` should be called after `process_document()`, or that bigrams use space separators, or that `_id_index` provides O(1) lookups. A project-specific model trained on actual development patterns can:",
        "",
        "- **Predict likely files to edit** based on the task description",
        "- **Generate commit messages** matching your conventions",
        "- **Suggest code patterns** consistent with the existing codebase",
        "- **Learn from feedback** to improve over time",
        "",
        "### How It Works",
        "",
        "```",
        ".git-ml/                      # Local only (gitignored)",
        "├── commits/                  # Commit metadata + diff hunks",
        "├── chats/                    # Query/response pairs",
        "├── sessions/                 # Development sessions",
        "└── actions/                  # Tool usage patterns",
        "```",
        "",
        "**All data stays local.** Nothing is transmitted anywhere. When we have enough data across contributors, we'll aggregate anonymized patterns (not raw conversations) to train a model that we publish for everyone to use.",
        "",
        "### Training Milestones",
        "",
        "| Capability | Data Needed |",
        "|------------|-------------|",
        "| File prediction | 500 commits, 100 sessions |",
        "| Commit messages | 2,000 commits, 500 sessions |",
        "| Code suggestions | 5,000 commits, 2,000 sessions |",
        "",
        "Check your progress:",
        "```bash",
        "python scripts/ml_data_collector.py stats",
        "python scripts/ml_data_collector.py estimate",
        "```",
        "",
        "### Setup (Opt-In)",
        "",
        "Data collection is **enabled by default** but requires hook setup to capture sessions:",
        "",
        "```bash",
        "# Add to .claude/settings.json for automatic session capture",
        "{",
        "  \"hooks\": {",
        "    \"Stop\": [{",
        "      \"type\": \"command\",",
        "      \"command\": \"/path/to/project/scripts/ml-session-capture-hook.sh\"",
        "    }]",
        "  }",
        "}",
        "```",
        "",
        "Manual collection:",
        "```bash",
        "# Record a chat manually",
        "python scripts/ml_data_collector.py chat --query \"...\" --response \"...\"",
        "",
        "# Add feedback to improve quality",
        "python scripts/ml_data_collector.py feedback --chat-id <id> --rating good",
        "```",
        "",
        "### Disable Collection",
        "",
        "If you prefer not to participate:",
        "",
        "```bash",
        "# Option 1: Environment variable (per-session or in shell profile)",
        "export ML_COLLECTION_ENABLED=0",
        "",
        "# Option 2: Remove the Stop hook from .claude/settings.json",
        "```",
        "",
        "When disabled, no data is written to `.git-ml/`. You can still use all other features normally.",
        "",
        "### Privacy Considerations",
        "",
        "- **Local storage only**: Data never leaves your machine automatically",
        "- **Gitignored**: `.git-ml/` is excluded from version control",
        "- **Regeneratable**: All commit data can be backfilled from git history",
        "- **Full control**: Delete `.git-ml/` anytime to remove all collected data",
        "- **Transparent**: All collection code is in `scripts/ml_data_collector.py`",
        "",
        "See [CLAUDE.md](CLAUDE.md) for detailed documentation on the ML data collection system.",
        ""
      ],
      "lines_removed": [],
      "context_before": [
        "```bash",
        "# Create a memory entry",
        "python scripts/new_memory.py \"What I learned about validation\"",
        "",
        "# Create a decision record",
        "python scripts/new_memory.py \"Use JSON over pickle\" --decision",
        "```",
        "",
        "See [docs/text-as-memories.md](docs/text-as-memories.md) for the complete guide.",
        ""
      ],
      "context_after": [
        "## Development History",
        "",
        "This project evolved through systematic improvements:",
        "",
        "1. **Initial Release**: Core hierarchical text processing",
        "2. **Code Review & Fixes**: TF-IDF calculation, O(1) lookups, type annotations",
        "3. **RAG Enhancements**: Chunk-level retrieval, metadata support, concept clustering",
        "4. **ConceptNet Integration**: Typed edges, relation-weighted PageRank, multi-hop inference",
        "5. **Connection Strategies**: Multiple strategies for Layer 2 concept connections",
        "6. **Showcase & Polish**: Interactive demo with real corpus analysis"
      ],
      "change_type": "add"
    }
  ],
  "hour_of_day": 13,
  "day_of_week": "Monday",
  "seconds_since_last_commit": 0,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}