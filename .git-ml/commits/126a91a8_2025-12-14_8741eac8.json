{
  "hash": "126a91a88f30ca6dcbace5e257ce2a93483f5ba5",
  "message": "Update",
  "author": "Claude",
  "timestamp": "2025-12-14 00:22:44 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "pyproject.toml",
    "requirements.txt",
    "tests/performance/test_performance.py"
  ],
  "insertions": 20,
  "deletions": 2,
  "hunks": [
    {
      "file": "pyproject.toml",
      "function": "classifiers = [",
      "start_line": 40,
      "lines_added": [
        "    \"mcp>=1.0\",  # Required for MCP server tests"
      ],
      "lines_removed": [],
      "context_before": [
        "    \"Typing :: Typed\",",
        "]",
        "",
        "# Zero runtime dependencies - pure stdlib!",
        "dependencies = []",
        "",
        "[project.optional-dependencies]",
        "dev = [",
        "    \"coverage>=7.0\",",
        "    \"pytest>=7.0\","
      ],
      "context_after": [
        "]",
        "",
        "[project.urls]",
        "Homepage = \"https://github.com/scrawlsbenches/Opus-code-test\"",
        "Documentation = \"https://github.com/scrawlsbenches/Opus-code-test#readme\"",
        "Repository = \"https://github.com/scrawlsbenches/Opus-code-test\"",
        "Issues = \"https://github.com/scrawlsbenches/Opus-code-test/issues\"",
        "",
        "[tool.setuptools.packages.find]",
        "where = [\".\"]"
      ],
      "change_type": "add"
    },
    {
      "file": "pyproject.toml",
      "function": "omit = [",
      "start_line": 73,
      "lines_added": [
        "",
        "[tool.pytest.ini_options]",
        "# Treat warnings as errors to catch issues early",
        "filterwarnings = [\"error\"]",
        "# Exclude utility functions that start with test_ but aren't tests",
        "# The test_then_commit function in cli_wrapper.py is a utility, not a test",
        "python_functions = [\"test_*\", \"!test_then_commit\"]"
      ],
      "lines_removed": [],
      "context_before": [
        "]",
        "",
        "[tool.coverage.report]",
        "exclude_lines = [",
        "    \"pragma: no cover\",",
        "    \"def __repr__\",",
        "    \"raise NotImplementedError\",",
        "    \"if TYPE_CHECKING:\",",
        "    \"if __name__ == .__main__.:\",",
        "]"
      ],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": "requirements.txt",
      "function": null,
      "start_line": 4,
      "lines_added": [
        "mcp>=1.0             # MCP server tests (Model Context Protocol)"
      ],
      "lines_removed": [],
      "context_before": [
        "# PRODUCTION: Zero dependencies!",
        "# This library uses only Python standard library modules.",
        "# No pip install required for production use.",
        "#",
        "# DEVELOPMENT: Install with `pip install -e \".[dev]\"`",
        "# Or install these manually:",
        "",
        "# Development dependencies",
        "coverage>=7.0        # Test coverage reporting",
        "pytest>=7.0          # Test framework (required by tests/unit/)"
      ],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": "tests/performance/test_performance.py",
      "function": "class TestScalabilityIndicators:",
      "start_line": 246,
      "lines_added": [
        "        # Warmup run to trigger any lazy imports/JIT compilation",
        "        warmup = CorticalTextProcessor()",
        "        for doc_id, content in docs[:3]:",
        "            warmup.process_document(doc_id, content)",
        "        del warmup",
        "",
        "        # Use a minimum floor for baseline to avoid division/multiplication issues",
        "        # when the baseline is very fast (e.g., < 10ms)",
        "        baseline = max(time_5_docs, 0.01)  # At least 10ms floor",
        "        expected_max = baseline * 5",
        "            f\"but 5 docs took {time_5_docs:.3f}s (baseline: {baseline:.3f}s). \""
      ],
      "lines_removed": [
        "        expected_max = time_5_docs * 5",
        "            f\"but 5 docs took {time_5_docs:.3f}s. \""
      ],
      "context_before": [
        "        \"\"\"",
        "        Processing time should scale roughly linearly with document count.",
        "",
        "        This catches O(n^2) issues in document processing.",
        "        \"\"\"",
        "        from cortical import CorticalTextProcessor",
        "        from tests.fixtures.small_corpus import SMALL_CORPUS_DOCS",
        "",
        "        docs = list(SMALL_CORPUS_DOCS.items())",
        ""
      ],
      "context_after": [
        "        # Time processing 5 docs",
        "        processor1 = CorticalTextProcessor()",
        "        start = time.perf_counter()",
        "        for doc_id, content in docs[:5]:",
        "            processor1.process_document(doc_id, content)",
        "        time_5_docs = time.perf_counter() - start",
        "",
        "        # Time processing 15 docs",
        "        processor2 = CorticalTextProcessor()",
        "        start = time.perf_counter()",
        "        for doc_id, content in docs[:15]:",
        "            processor2.process_document(doc_id, content)",
        "        time_15_docs = time.perf_counter() - start",
        "",
        "        # 15 docs should take roughly 3x time of 5 docs (linear scaling)",
        "        # Allow 5x to account for overhead and variability",
        "",
        "        assert time_15_docs < expected_max, (",
        "            f\"Processing 15 docs took {time_15_docs:.3f}s, \"",
        "            f\"Expected roughly linear scaling (< {expected_max:.3f}s). \"",
        "            f\"Possible O(n^2) issue in document processing.\"",
        "        )",
        "",
        "    def test_search_time_stable_across_queries(self, small_processor):",
        "        \"\"\"",
        "        Search time should be stable regardless of query complexity.",
        "",
        "        Large variance might indicate pathological cases.",
        "        \"\"\""
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 0,
  "day_of_week": "Sunday",
  "seconds_since_last_commit": -134524,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}