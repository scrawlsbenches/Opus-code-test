{
  "hash": "9e435150870dd65911075aae3349ed6423c36fe6",
  "message": "Add 5 high-priority tasks from dog-fooding showcase.py review",
  "author": "Claude",
  "timestamp": "2025-12-12 00:59:43 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "TASK_LIST.md"
  ],
  "insertions": 157,
  "deletions": 3,
  "hunks": [
    {
      "file": "TASK_LIST.md",
      "function": null,
      "start_line": 1,
      "lines_added": [
        "**Pending Tasks:** 38",
        "| # | Task | Category | Depends | Effort |",
        "|---|------|----------|---------|--------|",
        "| 141 | Filter Python keywords/artifacts from analysis | Quality | - | Medium |",
        "| 142 | Investigate 74s compute_all() performance regression | Perf | - | Medium |",
        "| 143 | Fix negative silhouette score in clustering | Quality | - | Medium |",
        "| 144 | Boost exact document name matches in search | Quality | - | Small |",
        "| 145 | Improve graph embedding quality for common terms | Quality | - | Medium |"
      ],
      "lines_removed": [
        "**Pending Tasks:** 33",
        "*All high-priority tasks completed!*"
      ],
      "context_before": [
        "# Task List: Cortical Text Processor",
        "",
        "Active backlog for the Cortical Text Processor project. Completed tasks are archived in [TASK_ARCHIVE.md](TASK_ARCHIVE.md).",
        "",
        "**Last Updated:** 2025-12-12"
      ],
      "context_after": [
        "**Completed Tasks:** 91+ (see archive)",
        "",
        "---",
        "",
        "## Active Backlog",
        "",
        "<!-- Machine-parseable format for automation -->",
        "",
        "### ðŸ”´ Critical (Do Now)",
        "",
        "*All critical tasks completed!*",
        "",
        "### ðŸŸ  High (Do This Week)",
        "",
        "",
        "### ðŸŸ¡ Medium (Do This Month)",
        "",
        "| # | Task | Category | Depends | Effort |",
        "|---|------|----------|---------|--------|",
        "| 137 | Cap bigram connections to top-K per bigram | Perf | - | Small |",
        "| 138 | Use sparse matrix multiplication for bigram connections | Perf | - | Medium |",
        "| 139 | Batch bigram connection updates to reduce dict overhead | Perf | - | Small |",
        "| 133 | Implement WAL + snapshot persistence (fault-tolerant rebuild) | Arch | 132 | Large |",
        "| 134 | Implement protobuf serialization for corpus | Arch | 132 | Medium |"
      ],
      "change_type": "modify"
    },
    {
      "file": "TASK_LIST.md",
      "function": "queries = [",
      "start_line": 1294,
      "lines_added": [
        "### 141. Filter Python Keywords/Artifacts from Analysis",
        "",
        "**Meta:** `status:pending` `priority:high` `category:quality`",
        "**Files:** `cortical/tokenizer.py`, `cortical/analysis.py`",
        "**Effort:** Medium",
        "",
        "**Problem (Dog-fooding 2025-12-12):** When Python code files are added to the corpus (samples/data_processor.py, etc.), Python keywords pollute the analysis:",
        "- \"self\" is #2 in PageRank (0.0038) - meaningless for content analysis",
        "- TF-IDF top terms: `assertequal`, `def`, `mockdatarecord`, `str`, `doc_id`",
        "- These artifacts drown out meaningful content terms",
        "",
        "**Root Cause:** Python sample files (Task #87) were added without code-specific filtering.",
        "",
        "**Solution Options:**",
        "1. Add `code_stopwords` list to tokenizer (self, def, return, class, etc.)",
        "2. Detect code files by extension and apply code-specific tokenization",
        "3. Add `exclude_code_keywords` parameter to analysis functions",
        "4. Create separate code vs prose processing modes",
        "",
        "**Acceptance Criteria:**",
        "- [ ] \"self\", \"def\", \"str\" not in top 20 PageRank terms when code files present",
        "- [ ] TF-IDF surfaces meaningful terms, not syntax",
        "- [ ] Existing code search features still work",
        "",
        "---",
        "",
        "### 142. Investigate 74s compute_all() Performance Regression",
        "",
        "**Meta:** `status:pending` `priority:high` `category:perf`",
        "**Files:** `cortical/processor.py`, `cortical/analysis.py`, `scripts/profile_full_analysis.py`",
        "**Effort:** Medium",
        "",
        "**Problem (Dog-fooding 2025-12-12):** compute_all() took 74.28s for 109 documents. Previous profiling (Task #132) improved:",
        "- bigram_connections: 20.85s â†’ 10.79s",
        "- semantics: 30.05s â†’ 5.56s",
        "",
        "But 74s is still very slow. Something else is dominating.",
        "",
        "**Diagnosis Steps:**",
        "1. Run profiling script: `python scripts/profile_full_analysis.py`",
        "2. Identify which phase is slow (bigram connections grew to 7.4M)",
        "3. Check if optimizations from Task #132 are still effective",
        "4. Profile with cProfile to find hot functions",
        "",
        "**Hypothesis:** The 109 documents (vs 92 before) include dense code files creating O(nÂ²) explosion in:",
        "- bigram_connections (now 7,446,672 connections)",
        "- semantic similarity computation",
        "",
        "**Acceptance Criteria:**",
        "- [ ] Identify root cause with profiling data",
        "- [ ] compute_all() under 30s for 109 documents",
        "- [ ] Document findings",
        "",
        "---",
        "",
        "### 143. Fix Negative Silhouette Score in Clustering",
        "",
        "**Meta:** `status:pending` `priority:high` `category:quality`",
        "**Files:** `cortical/analysis.py`",
        "**Effort:** Medium",
        "",
        "**Problem (Dog-fooding 2025-12-12):** Clustering quality metrics show:",
        "- silhouette = -0.00 (negative indicates poor cluster separation)",
        "- Only 33 clusters for 109 documents",
        "- modularity = 0.40 (acceptable but not great)",
        "",
        "Task #123 implemented Louvain clustering which should produce better results.",
        "",
        "**Diagnosis Steps:**",
        "1. Check if Louvain is actually being used (vs label propagation fallback)",
        "2. Verify resolution parameter (default 1.0)",
        "3. Check if the graph structure changed with new code documents",
        "4. Compare clustering before/after adding code samples",
        "",
        "**Possible Causes:**",
        "- Graph became too dense with code files (many shared terms)",
        "- Resolution parameter needs adjustment for larger/denser corpus",
        "- Silhouette calculation using wrong distance metric",
        "",
        "**Acceptance Criteria:**",
        "- [ ] silhouette score > 0.10",
        "- [ ] At least 40 clusters for 109 documents",
        "- [ ] Largest cluster < 15% of tokens",
        "",
        "---",
        "",
        "### 144. Boost Exact Document Name Matches in Search",
        "",
        "**Meta:** `status:pending` `priority:high` `category:quality`",
        "**Files:** `cortical/query/search.py`, `cortical/query/ranking.py`",
        "**Effort:** Small",
        "",
        "**Problem (Dog-fooding 2025-12-12):** Query \"distributed systems\" returns:",
        "1. unix_evolution (score: 19.804)",
        "2. database_design_patterns (score: 16.583)",
        "3. comprehensive_machine_learning (score: 13.244)",
        "",
        "But `distributed_systems` document exists and should rank #1 for this query.",
        "",
        "**Root Cause:** Document name/ID is not boosted in scoring. Only content matches count.",
        "",
        "**Solution:**",
        "Add document ID matching boost in ranking:",
        "```python",
        "# In ranking.py",
        "if query_terms_match_doc_id(query, doc_id):",
        "    score *= DOC_ID_BOOST  # e.g., 2.0",
        "```",
        "",
        "**Acceptance Criteria:**",
        "- [ ] Query \"distributed systems\" returns `distributed_systems` in top 2",
        "- [ ] Query \"fermentation\" keeps `fermentation_science` at #1",
        "- [ ] No regression on other queries",
        "",
        "---",
        "",
        "### 145. Improve Graph Embedding Quality for Common Terms",
        "",
        "**Meta:** `status:pending` `priority:high` `category:quality`",
        "**Files:** `cortical/embeddings.py`",
        "**Effort:** Medium",
        "",
        "**Problem (Dog-fooding 2025-12-12):** Graph embeddings show semantically odd similarities:",
        "- 'data' â†’ cognitive (0.968), alternatives (0.967), server (0.958)",
        "- These connections don't make semantic sense",
        "",
        "Random walk embeddings for 'neural' and 'learning' are better:",
        "- 'neural' â†’ resnet, networks, learn (good)",
        "- 'learning' â†’ rewards, rate, machine (good)",
        "",
        "**Hypothesis:** High-frequency terms like \"data\" connect to everything, making their embeddings indiscriminate. The random walk is capturing graph structure, not semantics.",
        "",
        "**Possible Fixes:**",
        "1. Use inverse document frequency weighting in random walks",
        "2. Cap connections per term before computing embeddings",
        "3. Use different embedding method for high-frequency terms",
        "4. Apply L2 normalization after embedding computation",
        "",
        "**Acceptance Criteria:**",
        "- [ ] 'data' similar to: processing, analysis, information (semantic neighbors)",
        "- [ ] High-frequency terms don't dominate similarity results",
        "- [ ] Existing good similarities preserved",
        "",
        "---",
        "",
        "| Quality | 5 | Quality issues from dog-fooding |",
        "| Perf | 4 | Performance improvements |",
        "*Updated 2025-12-12 after dog-fooding showcase.py*",
        ""
      ],
      "lines_removed": [
        "| BugFix | 1 | Bug fixes and regressions |"
      ],
      "context_before": [
        "3. Trace connection paths in the concept graph",
        "4. Document interesting findings",
        "",
        "**Potential Applications:**",
        "- Improve query expansion with cross-domain terms",
        "- Suggest related documents from different domains",
        "- Identify knowledge gaps at domain boundaries",
        "",
        "---",
        ""
      ],
      "context_after": [
        "## Category Index",
        "",
        "| Category | Pending | Description |",
        "|----------|---------|-------------|",
        "| AINav | 6 | AI assistant navigation & usability |",
        "| DevEx | 8 | Developer experience (scripts, tools) |",
        "| Docs | 2 | Documentation improvements |",
        "| Arch | 4 | Architecture refactoring |",
        "| CodeQual | 3 | Code quality improvements |",
        "| Testing | 3 | Test coverage |",
        "| TaskMgmt | 2 | Task management system |",
        "| Research | 2 | Research and analysis tasks |",
        "| Samples | 1 | Sample document improvements |",
        "| Deferred | 7 | Low priority or superseded |",
        "",
        "---",
        "",
        "## Notes",
        "",
        "- **Effort estimates:** Small (<1 hour), Medium (1-4 hours), Large (1+ days)",
        "- **Dependencies:** Complete dependent tasks first",
        "- **Quick Context:** Key info to start task without searching",
        "- **Archive:** Full history in [TASK_ARCHIVE.md](TASK_ARCHIVE.md)",
        "",
        "---"
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 0,
  "day_of_week": "Friday",
  "seconds_since_last_commit": -305105,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}