{
  "hash": "ef84437babe094f01f03afcbd034c9aac7deac38",
  "message": "fix: Use heredoc for Python in CI to avoid YAML syntax error",
  "author": "Claude",
  "timestamp": "2025-12-14 16:13:26 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    ".github/workflows/ci.yml"
  ],
  "insertions": 14,
  "deletions": 14,
  "hunks": [
    {
      "file": "workflows/ci.yml b/.github/workflows/ci.yml",
      "function": "jobs:",
      "start_line": 405,
      "lines_added": [
        "        python3 << 'PYTHON_SCRIPT'",
        "        import json",
        "        with open('.secrets-baseline.json') as f:",
        "            data = json.load(f)",
        "            results = data.get('results', {})",
        "            real_secrets = {k: v for k, v in results.items() if not k.startswith('tests/')}",
        "            if real_secrets:",
        "                print('⚠️ Potential secrets found in:')",
        "                for file in real_secrets:",
        "                    print(f'  - {file}')",
        "                print('Please review and ensure no real secrets are committed.')",
        "            else:",
        "                print('✅ No secrets detected in source files')",
        "        PYTHON_SCRIPT"
      ],
      "lines_removed": [
        "        python -c \"",
        "import json",
        "with open('.secrets-baseline.json') as f:",
        "    data = json.load(f)",
        "    results = data.get('results', {})",
        "    real_secrets = {k: v for k, v in results.items() if not k.startswith('tests/')}",
        "    if real_secrets:",
        "        print('⚠️ Potential secrets found in:')",
        "        for file in real_secrets:",
        "            print(f'  - {file}')",
        "        print('Please review and ensure no real secrets are committed.')",
        "    else:",
        "        print('✅ No secrets detected in source files')",
        "\""
      ],
      "context_before": [
        "        echo \"=== Running pip-audit Dependency Check ===\"",
        "        pip install -e \".[dev]\"",
        "        pip-audit --desc || echo \"⚠️ Review dependency vulnerabilities above\"",
        "",
        "    - name: Run detect-secrets (Secret Scanning)",
        "      run: |",
        "        echo \"=== Running detect-secrets ===\"",
        "        # Scan for accidentally committed secrets",
        "        detect-secrets scan --all-files --exclude-files '\\.git/.*' --exclude-files '.*\\.pkl' --exclude-files '.*\\.json' > .secrets-baseline.json || true",
        "        # Check if any high-entropy secrets were found (excluding test fixtures)"
      ],
      "context_after": [],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 16,
  "day_of_week": "Sunday",
  "seconds_since_last_commit": -77482,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}