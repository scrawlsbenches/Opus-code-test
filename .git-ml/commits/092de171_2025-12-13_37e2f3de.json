{
  "hash": "092de171cbc2b628d4cefa39b28950269ed02375",
  "message": "Add workflow template engine for multi-task creation",
  "author": "Claude",
  "timestamp": "2025-12-13 22:50:57 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    ".claude/workflows/bugfix.yaml",
    ".claude/workflows/feature.yaml",
    ".claude/workflows/refactor.yaml",
    "scripts/workflow.py",
    "tasks/2025-12-13_22-42-20_6ac7.json",
    "tasks/2025-12-13_22-50-18_cdd1.json"
  ],
  "insertions": 674,
  "deletions": 4,
  "hunks": [
    {
      "file": ".claude/workflows/bugfix.yaml",
      "function": null,
      "start_line": 0,
      "lines_added": [
        "# Workflow: Bug Fix",
        "# Creates a standard set of tasks for fixing bugs",
        "",
        "name: \"Bug Fix\"",
        "description: \"Investigation -> Fix -> Test -> Document\"",
        "category: \"bugfix\"",
        "",
        "# Variables that will be prompted or provided",
        "variables:",
        "  - name: bug_title",
        "    description: \"Brief description of the bug\"",
        "    required: true",
        "  - name: priority",
        "    description: \"Bug priority\"",
        "    default: \"high\"",
        "    choices: [\"high\", \"medium\", \"low\"]",
        "  - name: affected_file",
        "    description: \"Primary file affected (optional)\"",
        "    required: false",
        "",
        "tasks:",
        "  - id: investigate",
        "    title: \"Investigate: {bug_title}\"",
        "    category: \"research\"",
        "    priority: \"{priority}\"",
        "    effort: \"small\"",
        "    description: |",
        "      Investigate the root cause of: {bug_title}",
        "",
        "      Steps:",
        "      1. Reproduce the issue",
        "      2. Identify the root cause",
        "      3. Document findings in task notes",
        "",
        "  - id: fix",
        "    title: \"Fix: {bug_title}\"",
        "    category: \"bugfix\"",
        "    priority: \"{priority}\"",
        "    effort: \"medium\"",
        "    depends_on: [investigate]",
        "    description: |",
        "      Implement the fix for: {bug_title}",
        "",
        "      Checklist:",
        "      - [ ] Fix implemented",
        "      - [ ] Code follows existing patterns",
        "      - [ ] No new warnings introduced",
        "",
        "  - id: test",
        "    title: \"Add regression test for: {bug_title}\"",
        "    category: \"test\"",
        "    priority: \"high\"",
        "    effort: \"small\"",
        "    depends_on: [fix]",
        "    description: |",
        "      Add test(s) to prevent regression.",
        "",
        "      Requirements:",
        "      - Test should fail without the fix",
        "      - Test should pass with the fix",
        "      - Test covers edge cases",
        "",
        "  - id: document",
        "    title: \"Document fix for: {bug_title}\"",
        "    category: \"docs\"",
        "    priority: \"low\"",
        "    effort: \"small\"",
        "    depends_on: [fix]",
        "    description: |",
        "      Update any relevant documentation.",
        "",
        "      Consider:",
        "      - CHANGELOG entry",
        "      - Code comments if complex",
        "      - Update troubleshooting docs if user-facing"
      ],
      "lines_removed": [],
      "context_before": [],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": ".claude/workflows/feature.yaml",
      "function": null,
      "start_line": 0,
      "lines_added": [
        "# Workflow: Feature Implementation",
        "# Creates tasks for implementing a new feature",
        "",
        "name: \"Feature\"",
        "description: \"Design -> Implement -> Test -> Review\"",
        "category: \"feature\"",
        "",
        "variables:",
        "  - name: feature_name",
        "    description: \"Name of the feature\"",
        "    required: true",
        "  - name: priority",
        "    description: \"Feature priority\"",
        "    default: \"medium\"",
        "    choices: [\"high\", \"medium\", \"low\"]",
        "  - name: effort",
        "    description: \"Overall effort estimate\"",
        "    default: \"large\"",
        "    choices: [\"small\", \"medium\", \"large\"]",
        "",
        "tasks:",
        "  - id: design",
        "    title: \"Design: {feature_name}\"",
        "    category: \"arch\"",
        "    priority: \"{priority}\"",
        "    effort: \"medium\"",
        "    description: |",
        "      Design the API and architecture for: {feature_name}",
        "",
        "      Deliverables:",
        "      - API design (function signatures, data structures)",
        "      - Integration points with existing code",
        "      - Edge cases to handle",
        "",
        "  - id: implement",
        "    title: \"Implement: {feature_name}\"",
        "    category: \"feature\"",
        "    priority: \"{priority}\"",
        "    effort: \"{effort}\"",
        "    depends_on: [design]",
        "    description: |",
        "      Implement the core functionality for: {feature_name}",
        "",
        "      Checklist:",
        "      - [ ] Core logic implemented",
        "      - [ ] Error handling added",
        "      - [ ] Follows existing code patterns",
        "",
        "  - id: unit_tests",
        "    title: \"Unit tests for: {feature_name}\"",
        "    category: \"test\"",
        "    priority: \"high\"",
        "    effort: \"medium\"",
        "    depends_on: [implement]",
        "    description: |",
        "      Write comprehensive unit tests.",
        "",
        "      Coverage requirements:",
        "      - Happy path scenarios",
        "      - Edge cases",
        "      - Error conditions",
        "      - Target: 90%+ coverage for new code",
        "",
        "  - id: integration_tests",
        "    title: \"Integration tests for: {feature_name}\"",
        "    category: \"test\"",
        "    priority: \"high\"",
        "    effort: \"medium\"",
        "    depends_on: [implement]",
        "    description: |",
        "      Write integration tests verifying feature works with existing system.",
        "",
        "      Test scenarios:",
        "      - End-to-end workflows",
        "      - Interaction with other components",
        "      - Performance characteristics",
        "",
        "  - id: documentation",
        "    title: \"Documentation for: {feature_name}\"",
        "    category: \"docs\"",
        "    priority: \"medium\"",
        "    effort: \"small\"",
        "    depends_on: [unit_tests, integration_tests]",
        "    description: |",
        "      Document the new feature.",
        "",
        "      Include:",
        "      - Usage examples",
        "      - API reference updates",
        "      - CLAUDE.md updates if applicable"
      ],
      "lines_removed": [],
      "context_before": [],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": ".claude/workflows/refactor.yaml",
      "function": null,
      "start_line": 0,
      "lines_added": [
        "# Workflow: Refactoring",
        "# Creates tasks for safe refactoring",
        "",
        "name: \"Refactor\"",
        "description: \"Analyze -> Refactor -> Verify -> Cleanup\"",
        "category: \"refactor\"",
        "",
        "variables:",
        "  - name: refactor_target",
        "    description: \"What is being refactored (module, function, pattern)\"",
        "    required: true",
        "  - name: priority",
        "    description: \"Refactor priority\"",
        "    default: \"medium\"",
        "    choices: [\"high\", \"medium\", \"low\"]",
        "",
        "tasks:",
        "  - id: analyze",
        "    title: \"Analyze before refactor: {refactor_target}\"",
        "    category: \"research\"",
        "    priority: \"{priority}\"",
        "    effort: \"small\"",
        "    description: |",
        "      Understand current state before refactoring.",
        "",
        "      Document:",
        "      - Current behavior and edge cases",
        "      - All callers/dependencies",
        "      - Test coverage baseline",
        "",
        "  - id: refactor",
        "    title: \"Refactor: {refactor_target}\"",
        "    category: \"refactor\"",
        "    priority: \"{priority}\"",
        "    effort: \"medium\"",
        "    depends_on: [analyze]",
        "    description: |",
        "      Perform the refactoring.",
        "",
        "      Guidelines:",
        "      - Make small, incremental changes",
        "      - Run tests after each change",
        "      - Keep commits atomic",
        "",
        "  - id: verify",
        "    title: \"Verify refactor: {refactor_target}\"",
        "    category: \"test\"",
        "    priority: \"high\"",
        "    effort: \"small\"",
        "    depends_on: [refactor]",
        "    description: |",
        "      Verify refactoring didn't break anything.",
        "",
        "      Checklist:",
        "      - [ ] All existing tests pass",
        "      - [ ] Coverage didn't decrease",
        "      - [ ] No new warnings",
        "      - [ ] Performance not degraded",
        "",
        "  - id: cleanup",
        "    title: \"Cleanup after refactor: {refactor_target}\"",
        "    category: \"codequal\"",
        "    priority: \"low\"",
        "    effort: \"small\"",
        "    depends_on: [verify]",
        "    description: |",
        "      Final cleanup tasks.",
        "",
        "      Consider:",
        "      - Remove dead code",
        "      - Update comments",
        "      - Remove temporary scaffolding"
      ],
      "lines_removed": [],
      "context_before": [],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": "scripts/workflow.py",
      "function": null,
      "start_line": 0,
      "lines_added": [
        "#!/usr/bin/env python3",
        "\"\"\"",
        "Workflow template engine for task creation.",
        "",
        "Spawns multiple linked tasks from YAML workflow templates.",
        "",
        "Usage:",
        "    # List available workflows",
        "    python scripts/workflow.py list",
        "",
        "    # Run a workflow",
        "    python scripts/workflow.py run bugfix --bug_title \"Login crashes on special chars\"",
        "",
        "    # Run with all options",
        "    python scripts/workflow.py run feature \\\\",
        "        --feature_name \"Dark mode\" \\\\",
        "        --priority high \\\\",
        "        --effort large",
        "",
        "    # Dry run (show tasks without creating)",
        "    python scripts/workflow.py run bugfix --bug_title \"Test\" --dry-run",
        "\"\"\"",
        "",
        "import argparse",
        "import sys",
        "from dataclasses import dataclass",
        "from pathlib import Path",
        "from typing import Any, Dict, List, Optional",
        "",
        "# Try to import yaml, fall back to basic parsing if not available",
        "try:",
        "    import yaml",
        "    HAS_YAML = True",
        "except ImportError:",
        "    HAS_YAML = False",
        "",
        "# Add scripts to path",
        "sys.path.insert(0, str(Path(__file__).parent))",
        "",
        "from task_utils import TaskSession, Task",
        "",
        "",
        "# Default workflows directory",
        "WORKFLOWS_DIR = Path(__file__).parent.parent / \".claude\" / \"workflows\"",
        "",
        "",
        "@dataclass",
        "class WorkflowVariable:",
        "    \"\"\"A variable in a workflow template.\"\"\"",
        "    name: str",
        "    description: str",
        "    required: bool = True",
        "    default: Optional[str] = None",
        "    choices: Optional[List[str]] = None",
        "",
        "",
        "@dataclass",
        "class WorkflowTask:",
        "    \"\"\"A task template in a workflow.\"\"\"",
        "    id: str",
        "    title: str",
        "    category: str = \"general\"",
        "    priority: str = \"medium\"",
        "    effort: str = \"medium\"",
        "    description: str = \"\"",
        "    depends_on: List[str] = None",
        "",
        "    def __post_init__(self):",
        "        if self.depends_on is None:",
        "            self.depends_on = []",
        "",
        "",
        "@dataclass",
        "class Workflow:",
        "    \"\"\"A workflow template that creates multiple tasks.\"\"\"",
        "    name: str",
        "    description: str",
        "    category: str",
        "    variables: List[WorkflowVariable]",
        "    tasks: List[WorkflowTask]",
        "",
        "    @classmethod",
        "    def from_dict(cls, data: Dict[str, Any]) -> 'Workflow':",
        "        \"\"\"Create workflow from parsed YAML dict.\"\"\"",
        "        variables = [",
        "            WorkflowVariable(",
        "                name=v['name'],",
        "                description=v.get('description', ''),",
        "                required=v.get('required', True),",
        "                default=v.get('default'),",
        "                choices=v.get('choices')",
        "            )",
        "            for v in data.get('variables', [])",
        "        ]",
        "",
        "        tasks = [",
        "            WorkflowTask(",
        "                id=t['id'],",
        "                title=t['title'],",
        "                category=t.get('category', 'general'),",
        "                priority=t.get('priority', 'medium'),",
        "                effort=t.get('effort', 'medium'),",
        "                description=t.get('description', ''),",
        "                depends_on=t.get('depends_on', [])",
        "            )",
        "            for t in data.get('tasks', [])",
        "        ]",
        "",
        "        return cls(",
        "            name=data['name'],",
        "            description=data.get('description', ''),",
        "            category=data.get('category', 'general'),",
        "            variables=variables,",
        "            tasks=tasks",
        "        )",
        "",
        "    @classmethod",
        "    def load(cls, filepath: Path) -> 'Workflow':",
        "        \"\"\"Load workflow from YAML file.\"\"\"",
        "        if not HAS_YAML:",
        "            raise ImportError(",
        "                \"PyYAML is required for workflow templates. \"",
        "                \"Install with: pip install pyyaml\"",
        "            )",
        "",
        "        with open(filepath) as f:",
        "            data = yaml.safe_load(f)",
        "",
        "        return cls.from_dict(data)",
        "",
        "",
        "def list_workflows(workflows_dir: Path = WORKFLOWS_DIR) -> List[Workflow]:",
        "    \"\"\"List all available workflow templates.\"\"\"",
        "    workflows = []",
        "",
        "    if not workflows_dir.exists():",
        "        return workflows",
        "",
        "    for filepath in sorted(workflows_dir.glob(\"*.yaml\")):",
        "        try:",
        "            workflow = Workflow.load(filepath)",
        "            workflows.append(workflow)",
        "        except Exception as e:",
        "            print(f\"Warning: Could not load {filepath}: {e}\")",
        "",
        "    return workflows",
        "",
        "",
        "def substitute_variables(text: str, variables: Dict[str, str]) -> str:",
        "    \"\"\"Substitute {variable} placeholders in text.\"\"\"",
        "    result = text",
        "    for name, value in variables.items():",
        "        result = result.replace(f\"{{{name}}}\", value)",
        "    return result",
        "",
        "",
        "def run_workflow(",
        "    workflow: Workflow,",
        "    variables: Dict[str, str],",
        "    tasks_dir: str = \"tasks\",",
        "    dry_run: bool = False",
        ") -> List[Task]:",
        "    \"\"\"",
        "    Execute a workflow template, creating all tasks.",
        "",
        "    Args:",
        "        workflow: The workflow to execute",
        "        variables: Variable values to substitute",
        "        tasks_dir: Directory to save tasks",
        "        dry_run: If True, show tasks but don't create",
        "",
        "    Returns:",
        "        List of created Task objects",
        "    \"\"\"",
        "    # Validate required variables",
        "    for var in workflow.variables:",
        "        if var.required and var.name not in variables:",
        "            if var.default:",
        "                variables[var.name] = var.default",
        "            else:",
        "                raise ValueError(f\"Missing required variable: {var.name}\")",
        "",
        "        # Validate choices",
        "        if var.choices and var.name in variables:",
        "            if variables[var.name] not in var.choices:",
        "                raise ValueError(",
        "                    f\"Invalid value for {var.name}: {variables[var.name]}. \"",
        "                    f\"Must be one of: {var.choices}\"",
        "                )",
        "",
        "    # Create session",
        "    session = TaskSession()",
        "",
        "    # Map workflow task IDs to actual task IDs",
        "    id_mapping: Dict[str, str] = {}",
        "",
        "    # Create tasks in order",
        "    created_tasks = []",
        "    for wf_task in workflow.tasks:",
        "        # Substitute variables",
        "        title = substitute_variables(wf_task.title, variables)",
        "        description = substitute_variables(wf_task.description, variables)",
        "        priority = substitute_variables(wf_task.priority, variables)",
        "        effort = substitute_variables(wf_task.effort, variables)",
        "",
        "        # Resolve dependencies to actual task IDs",
        "        depends_on = [",
        "            id_mapping[dep_id]",
        "            for dep_id in wf_task.depends_on",
        "            if dep_id in id_mapping",
        "        ]",
        "",
        "        # Create task",
        "        task = session.create_task(",
        "            title=title,",
        "            category=wf_task.category,",
        "            priority=priority,",
        "            effort=effort,",
        "            description=description,",
        "            depends_on=depends_on",
        "        )",
        "",
        "        id_mapping[wf_task.id] = task.id",
        "        created_tasks.append(task)",
        "",
        "    if dry_run:",
        "        print(f\"\\n[Dry Run] Would create {len(created_tasks)} tasks:\\n\")",
        "        for task in created_tasks:",
        "            deps = f\" (depends on: {len(task.depends_on)})\" if task.depends_on else \"\"",
        "            print(f\"  [{task.priority.upper()}] {task.title}{deps}\")",
        "            if task.description:",
        "                # Show first line of description",
        "                first_line = task.description.strip().split('\\n')[0]",
        "                print(f\"           {first_line[:60]}...\")",
        "        return created_tasks",
        "",
        "    # Save",
        "    filepath = session.save(tasks_dir)",
        "    print(f\"\\nCreated {len(created_tasks)} tasks from '{workflow.name}' workflow\")",
        "    print(f\"Saved to: {filepath}\\n\")",
        "",
        "    for task in created_tasks:",
        "        deps = f\" (depends on: {len(task.depends_on)})\" if task.depends_on else \"\"",
        "        print(f\"  {task.id}: {task.title}{deps}\")",
        "",
        "    return created_tasks",
        "",
        "",
        "def main():",
        "    parser = argparse.ArgumentParser(",
        "        description=\"Workflow template engine for task creation\",",
        "        formatter_class=argparse.RawDescriptionHelpFormatter,",
        "        epilog=__doc__",
        "    )",
        "",
        "    subparsers = parser.add_subparsers(dest=\"command\", help=\"Commands\")",
        "",
        "    # List command",
        "    list_parser = subparsers.add_parser(\"list\", help=\"List available workflows\")",
        "    list_parser.add_argument(",
        "        \"--dir\", default=str(WORKFLOWS_DIR),",
        "        help=\"Workflows directory\"",
        "    )",
        "",
        "    # Run command",
        "    run_parser = subparsers.add_parser(\"run\", help=\"Run a workflow\")",
        "    run_parser.add_argument(\"workflow\", help=\"Workflow name (e.g., 'bugfix', 'feature')\")",
        "    run_parser.add_argument(\"--dry-run\", action=\"store_true\", help=\"Show tasks without creating\")",
        "    run_parser.add_argument(\"--tasks-dir\", default=\"tasks\", help=\"Tasks directory\")",
        "",
        "    # Parse known args first to get workflow name",
        "    args, remaining = parser.parse_known_args()",
        "",
        "    if args.command == \"list\":",
        "        workflows = list_workflows(Path(args.dir))",
        "        if not workflows:",
        "            print(\"No workflows found.\")",
        "            print(f\"Add .yaml files to: {args.dir}\")",
        "            return",
        "",
        "        print(\"\\nAvailable Workflows:\\n\")",
        "        for wf in workflows:",
        "            print(f\"  {wf.name.lower().replace(' ', '_')}\")",
        "            print(f\"    {wf.description}\")",
        "            print(f\"    Tasks: {len(wf.tasks)}\")",
        "            if wf.variables:",
        "                var_names = [v.name for v in wf.variables]",
        "                print(f\"    Variables: {', '.join(var_names)}\")",
        "            print()",
        "",
        "    elif args.command == \"run\":",
        "        # Find workflow file",
        "        workflow_name = args.workflow.lower().replace(' ', '_')",
        "        workflow_path = WORKFLOWS_DIR / f\"{workflow_name}.yaml\"",
        "",
        "        if not workflow_path.exists():",
        "            print(f\"Workflow not found: {workflow_name}\")",
        "            print(f\"Available: {', '.join(p.stem for p in WORKFLOWS_DIR.glob('*.yaml'))}\")",
        "            return",
        "",
        "        workflow = Workflow.load(workflow_path)",
        "",
        "        # Add workflow-specific arguments dynamically",
        "        for var in workflow.variables:",
        "            arg_name = f\"--{var.name}\"",
        "            help_text = var.description",
        "            if var.default:",
        "                help_text += f\" (default: {var.default})\"",
        "            if var.choices:",
        "                help_text += f\" (choices: {', '.join(var.choices)})\"",
        "",
        "            run_parser.add_argument(",
        "                arg_name,",
        "                default=var.default,",
        "                required=var.required and not var.default,",
        "                help=help_text",
        "            )",
        "",
        "        # Re-parse with dynamic arguments",
        "        args = parser.parse_args()",
        "",
        "        # Collect variables",
        "        variables = {}",
        "        for var in workflow.variables:",
        "            value = getattr(args, var.name, None)",
        "            if value:",
        "                variables[var.name] = value",
        "",
        "        # Run workflow",
        "        try:",
        "            run_workflow(",
        "                workflow,",
        "                variables,",
        "                tasks_dir=args.tasks_dir,",
        "                dry_run=args.dry_run",
        "            )",
        "        except ValueError as e:",
        "            print(f\"Error: {e}\")",
        "            return",
        "",
        "    else:",
        "        parser.print_help()",
        "",
        "",
        "if __name__ == \"__main__\":",
        "    main()"
      ],
      "lines_removed": [],
      "context_before": [],
      "context_after": [],
      "change_type": "add"
    },
    {
      "file": "tasks/2025-12-13_22-42-20_6ac7.json",
      "function": null,
      "start_line": 1,
      "lines_added": [
        "  \"saved_at\": \"2025-12-13T22:50:36.977690\","
      ],
      "lines_removed": [
        "  \"saved_at\": \"2025-12-13T22:48:20.764101\","
      ],
      "context_before": [
        "{",
        "  \"version\": 1,",
        "  \"session_id\": \"6ac7\",",
        "  \"started_at\": \"2025-12-13T22:42:20.986896\","
      ],
      "context_after": [
        "  \"tasks\": [",
        "    {",
        "      \"id\": \"T-20251213-224220-6ac7-01\",",
        "      \"title\": \"Fix non-atomic file writes (data loss risk)\",",
        "      \"status\": \"completed\",",
        "      \"priority\": \"high\",",
        "      \"category\": \"bugfix\",",
        "      \"description\": \"TaskSession.save() should write to .tmp then atomic rename\",",
        "      \"depends_on\": [],",
        "      \"effort\": \"small\","
      ],
      "change_type": "modify"
    },
    {
      "file": "tasks/2025-12-13_22-42-20_6ac7.json",
      "function": null,
      "start_line": 57,
      "lines_added": [
        "      \"status\": \"completed\",",
        "      \"updated_at\": \"2025-12-13T22:50:36.977578\",",
        "      \"completed_at\": \"2025-12-13T22:50:36.977578\","
      ],
      "lines_removed": [
        "      \"status\": \"pending\",",
        "      \"updated_at\": null,",
        "      \"completed_at\": null,"
      ],
      "context_before": [
        "      \"context\": {",
        "        \"files\": [",
        "          \"scripts/task_utils.py\"",
        "        ],",
        "        \"line\": 156",
        "      }",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-224220-6ac7-04\",",
        "      \"title\": \"Add workflow templates (bugfix, feature, refactor)\","
      ],
      "context_after": [
        "      \"priority\": \"medium\",",
        "      \"category\": \"feature\",",
        "      \"description\": \"YAML templates in .claude/workflows/ that spawn task chains\",",
        "      \"depends_on\": [",
        "        \"T-20251213-224220-6ac7-01\",",
        "        \"T-20251213-224220-6ac7-02\",",
        "        \"T-20251213-224220-6ac7-03\"",
        "      ],",
        "      \"effort\": \"medium\",",
        "      \"created_at\": \"2025-12-13T22:42:20.986963\",",
        "      \"context\": {}",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-224220-6ac7-05\",",
        "      \"title\": \"Add auto-task creation from CI test failures\",",
        "      \"status\": \"pending\",",
        "      \"priority\": \"medium\",",
        "      \"category\": \"automation\",",
        "      \"description\": \"Parse pytest failures, create bugfix tasks automatically\",",
        "      \"depends_on\": [],"
      ],
      "change_type": "modify"
    },
    {
      "file": "tasks/2025-12-13_22-50-18_cdd1.json",
      "function": null,
      "start_line": 0,
      "lines_added": [
        "{",
        "  \"version\": 1,",
        "  \"session_id\": \"cdd1\",",
        "  \"started_at\": \"2025-12-13T22:50:18.707702\",",
        "  \"saved_at\": \"2025-12-13T22:50:37.198957\",",
        "  \"tasks\": [",
        "    {",
        "      \"id\": \"T-20251213-225018-cdd1-001\",",
        "      \"title\": \"Design: Workflow templates\",",
        "      \"status\": \"completed\",",
        "      \"priority\": \"medium\",",
        "      \"category\": \"arch\",",
        "      \"description\": \"Design the API and architecture for: Workflow templates\\n\\nDeliverables:\\n- API design (function signatures, data structures)\\n- Integration points with existing code\\n- Edge cases to handle\\n\",",
        "      \"depends_on\": [],",
        "      \"effort\": \"medium\",",
        "      \"created_at\": \"2025-12-13T22:50:18.707760\",",
        "      \"updated_at\": \"2025-12-13T22:50:37.089387\",",
        "      \"completed_at\": \"2025-12-13T22:50:37.089387\",",
        "      \"context\": {}",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-225018-cdd1-002\",",
        "      \"title\": \"Implement: Workflow templates\",",
        "      \"status\": \"completed\",",
        "      \"priority\": \"medium\",",
        "      \"category\": \"feature\",",
        "      \"description\": \"Implement the core functionality for: Workflow templates\\n\\nChecklist:\\n- [ ] Core logic implemented\\n- [ ] Error handling added\\n- [ ] Follows existing code patterns\\n\",",
        "      \"depends_on\": [",
        "        \"T-20251213-225018-cdd1-001\"",
        "      ],",
        "      \"effort\": \"medium\",",
        "      \"created_at\": \"2025-12-13T22:50:18.707774\",",
        "      \"updated_at\": \"2025-12-13T22:50:37.198821\",",
        "      \"completed_at\": \"2025-12-13T22:50:37.198821\",",
        "      \"context\": {}",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-225018-cdd1-003\",",
        "      \"title\": \"Unit tests for: Workflow templates\",",
        "      \"status\": \"pending\",",
        "      \"priority\": \"high\",",
        "      \"category\": \"test\",",
        "      \"description\": \"Write comprehensive unit tests.\\n\\nCoverage requirements:\\n- Happy path scenarios\\n- Edge cases\\n- Error conditions\\n- Target: 90%+ coverage for new code\\n\",",
        "      \"depends_on\": [",
        "        \"T-20251213-225018-cdd1-002\"",
        "      ],",
        "      \"effort\": \"medium\",",
        "      \"created_at\": \"2025-12-13T22:50:18.707790\",",
        "      \"updated_at\": null,",
        "      \"completed_at\": null,",
        "      \"context\": {}",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-225018-cdd1-004\",",
        "      \"title\": \"Integration tests for: Workflow templates\",",
        "      \"status\": \"pending\",",
        "      \"priority\": \"high\",",
        "      \"category\": \"test\",",
        "      \"description\": \"Write integration tests verifying feature works with existing system.\\n\\nTest scenarios:\\n- End-to-end workflows\\n- Interaction with other components\\n- Performance characteristics\\n\",",
        "      \"depends_on\": [",
        "        \"T-20251213-225018-cdd1-002\"",
        "      ],",
        "      \"effort\": \"medium\",",
        "      \"created_at\": \"2025-12-13T22:50:18.707805\",",
        "      \"updated_at\": null,",
        "      \"completed_at\": null,",
        "      \"context\": {}",
        "    },",
        "    {",
        "      \"id\": \"T-20251213-225018-cdd1-005\",",
        "      \"title\": \"Documentation for: Workflow templates\",",
        "      \"status\": \"pending\",",
        "      \"priority\": \"medium\",",
        "      \"category\": \"docs\",",
        "      \"description\": \"Document the new feature.\\n\\nInclude:\\n- Usage examples\\n- API reference updates\\n- CLAUDE.md updates if applicable\\n\",",
        "      \"depends_on\": [",
        "        \"T-20251213-225018-cdd1-003\",",
        "        \"T-20251213-225018-cdd1-004\"",
        "      ],",
        "      \"effort\": \"small\",",
        "      \"created_at\": \"2025-12-13T22:50:18.707823\",",
        "      \"updated_at\": null,",
        "      \"completed_at\": null,",
        "      \"context\": {}",
        "    }",
        "  ]",
        "}"
      ],
      "lines_removed": [],
      "context_before": [],
      "context_after": [],
      "change_type": "add"
    }
  ],
  "hour_of_day": 22,
  "day_of_week": "Saturday",
  "seconds_since_last_commit": -140031,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}