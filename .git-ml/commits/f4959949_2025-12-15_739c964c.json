{
  "hash": "f495994938f47fb37c9102d80f9e32c92ce57332",
  "message": "Update CODE_REVIEW.md to reflect processor package refactoring",
  "author": "Claude",
  "timestamp": "2025-12-15 03:30:22 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    "CODE_REVIEW.md"
  ],
  "insertions": 157,
  "deletions": 195,
  "hunks": [
    {
      "file": "CODE_REVIEW.md",
      "function": null,
      "start_line": 1,
      "lines_added": [
        "**Date:** 2025-12-15",
        "**Last Updated:** 2025-12-15",
        "This review identifies code quality issues across the Cortical Text Processor codebase. The code is generally well-structured with good documentation. Since the last review, significant improvements have been made, most notably the refactoring of the monolithic `CorticalTextProcessor` class into a modular mixin-based architecture.",
        "| Category | Severity | Count | Status |",
        "|----------|----------|-------|--------|",
        "| God Class | High | 1 | **RESOLVED** |",
        "| Deprecated Code Still Used | Medium | 1 | Open |",
        "| Naming Inconsistencies | Medium | 4 | Open |",
        "| Code Duplication | Medium | 2 | Open |",
        "| Magic Numbers | Low | 3 | Open |",
        "| Minor Clean Code Issues | Low | 4 | Partially Addressed |",
        "## 1. God Class Anti-Pattern - **RESOLVED**",
        "### Previous Issue: CorticalTextProcessor was Too Large",
        "**Previous State:** `cortical/processor.py` - 3115 lines, 70+ methods",
        "### Current State: Refactored into Mixin Architecture",
        "The `CorticalTextProcessor` has been successfully refactored into a package with focused mixins:",
        "**Directory:** `cortical/processor/`",
        "",
        "| File | Lines | Responsibility |",
        "|------|-------|----------------|",
        "| `core.py` | 169 | Initialization, staleness tracking, layer management |",
        "| `documents.py` | 456 | Document processing, add/remove, metadata |",
        "| `compute.py` | 1041 | compute_all, PageRank, TF-IDF, clustering |",
        "| `query_api.py` | 719 | Search, expansion, retrieval methods |",
        "| `introspection.py` | 357 | State inspection, fingerprints, summaries |",
        "| `persistence_api.py` | 245 | Save/load/export methods |",
        "| `__init__.py` | 63 | Re-exports CorticalTextProcessor class |",
        "| **Total** | **3050** | Distributed across focused modules |",
        "",
        "**Benefits Achieved:**",
        "- Each mixin has a single responsibility",
        "- Easier to test individual components",
        "- Improved code navigation",
        "- No single file exceeds 1050 lines",
        "",
        "**Additional Modularization:**",
        "",
        "The `query/` module has also been split into 8 focused modules (3194 total lines):",
        "- `expansion.py` (459 lines) - Query expansion",
        "- `ranking.py` (472 lines) - Multi-stage ranking",
        "- `search.py` (422 lines) - Document search",
        "- `passages.py` (407 lines) - Passage retrieval",
        "- `definitions.py` (375 lines) - Definition search",
        "- `chunking.py` (335 lines) - Text chunking",
        "- `analogy.py` (330 lines) - Analogy completion",
        "- `intent.py` (220 lines) - Intent-based queries",
        "**Current Usage (15+ locations):**",
        "- `minicolumn.py:390-391` - maintained in `add_feedforward_connection()`",
        "- `minicolumn.py:448` - serialized in `to_dict()`",
        "- `minicolumn.py:497` - deserialized in `from_dict()`",
        "- `analysis.py:967, 1507` - used for feedforward iteration",
        "- `query/expansion.py:175-176` - used for concept expansion",
        "- `query/ranking.py:212, 214` - used for scoring",
        "- `proto/serialization.py:270, 335` - protobuf serialization",
        "- Maintenance burden (must keep both `feedforward_sources` and `feedforward_connections` in sync)",
        "1. Remove the deprecated field completely and migrate all usages to `feedforward_connections`",
        "**Current usage:** 200 occurrences across 17 files",
        "",
        "# Common pattern",
        "layer3 = self.layers[CorticalLayer.DOCUMENTS]  # Note: layer2 often skipped",
        "**Files most affected:**",
        "- `cortical/analysis.py` (47 occurrences)",
        "- `cortical/query/search.py` (21 occurrences)",
        "- `cortical/query/analogy.py` (17 occurrences)",
        "- `cortical/processor/documents.py` (16 occurrences)",
        "- `cortical/query/expansion.py` (16 occurrences)"
      ],
      "lines_removed": [
        "**Date:** 2025-12-14",
        "This review identifies code quality issues across the Cortical Text Processor codebase. The code is generally well-structured with good documentation, but several patterns indicate opportunities for improvement.",
        "| Category | Severity | Count |",
        "|----------|----------|-------|",
        "| God Class | High | 1 |",
        "| Deprecated Code Still Used | Medium | 1 |",
        "| Naming Inconsistencies | Medium | 4 |",
        "| Code Duplication | Medium | 3 |",
        "| Magic Numbers | Low | 5 |",
        "| Minor Clean Code Issues | Low | 6 |",
        "## 1. God Class Anti-Pattern",
        "### Issue: CorticalTextProcessor is Too Large",
        "**File:** `cortical/processor.py`",
        "**Lines:** 3115 lines",
        "**Methods:** 70+ public methods",
        "The `CorticalTextProcessor` class violates the Single Responsibility Principle. It handles:",
        "- Document processing",
        "- TF-IDF computation",
        "- PageRank computation",
        "- Query expansion",
        "- Semantic analysis",
        "- Fingerprinting",
        "- Persistence",
        "- Concept clustering",
        "- Graph embeddings",
        "- And more...",
        "**Symptoms:**",
        "- File is over 3000 lines",
        "- Class has 70+ methods",
        "- Many methods are thin delegators to other modules",
        "- Difficult to test individual components",
        "**Recommendation:**",
        "Consider extracting cohesive functionality into separate classes:",
        "```",
        "CorticalTextProcessor (core orchestration only)",
        "├── DocumentManager (add/remove/batch documents)",
        "├── ComputationEngine (TF-IDF, PageRank, embeddings)",
        "├── QueryEngine (search, expansion, ranking)",
        "├── SemanticAnalyzer (relations, concepts, retrofitting)",
        "└── PersistenceManager (save/load)",
        "```",
        "**Problem:**",
        "The field is marked as deprecated in comments, but:",
        "- It's still maintained in `add_feedforward_connection()` (line 390-391)",
        "- It's still serialized in `to_dict()` (line 448)",
        "- It's still used in `analysis.py:967` and `analysis.py:1507`",
        "- It's used in 20+ test files",
        "- Maintenance burden (must keep both in sync)",
        "1. Remove the deprecated field completely and migrate all usages",
        "# In processor.py",
        "layer3 = self.layers[CorticalLayer.DOCUMENTS]  # Note: layer2 skipped",
        "**Files affected:** `processor.py`, `showcase.py`, `analysis.py`, multiple test files"
      ],
      "context_before": [
        "# Code Quality Review Report",
        ""
      ],
      "context_after": [
        "**Reviewer:** Claude (Automated Code Review)",
        "**Scope:** Code smells, clean code issues, symbolic misinterpretations",
        "",
        "---",
        "",
        "## Executive Summary",
        "",
        "",
        "",
        "---",
        "",
        "",
        "",
        "",
        "",
        "",
        "",
        "---",
        "",
        "## 2. Deprecated Code Still in Use",
        "",
        "### Issue: feedforward_sources is Deprecated but Actively Used",
        "",
        "**File:** `cortical/minicolumn.py:76, 118`",
        "",
        "```python",
        "feedforward_sources: IDs of columns that feed into this one (deprecated, use feedforward_connections)",
        "...",
        "self.feedforward_sources: Set[str] = set()  # Deprecated: use feedforward_connections",
        "```",
        "",
        "",
        "**Impact:**",
        "- Confusion for developers",
        "- Memory overhead (duplicate data)",
        "",
        "**Recommendation:**",
        "Either:",
        "2. Or remove the deprecation comment if it's still needed",
        "",
        "---",
        "",
        "## 3. Naming Inconsistencies",
        "",
        "### 3.1 Layer Variable Naming",
        "",
        "**Pattern:** `layer0`, `layer1`, `layer2`, `layer3` vs semantic names",
        "",
        "```python",
        "layer0 = self.layers[CorticalLayer.TOKENS]",
        "layer1 = self.layers[CorticalLayer.BIGRAMS]",
        "",
        "# Better naming would be:",
        "token_layer = self.layers[CorticalLayer.TOKENS]",
        "bigram_layer = self.layers[CorticalLayer.BIGRAMS]",
        "document_layer = self.layers[CorticalLayer.DOCUMENTS]",
        "```",
        "",
        "",
        "**Issue:**",
        "- Numeric names don't convey meaning",
        "- `layer2` (CONCEPTS) is often skipped, making the pattern confusing",
        "- Code uses `layer3` for documents but also `doc_layer` in some places",
        "",
        "---",
        "",
        "### 3.2 Inconsistent Abbreviations",
        ""
      ],
      "change_type": "modify"
    },
    {
      "file": "CODE_REVIEW.md",
      "function": "doc_occurrence_counts  # Abbreviated",
      "start_line": 135,
      "lines_added": [
        "**File:** `cortical/processor/query_api.py`"
      ],
      "lines_removed": [
        "**File:** `cortical/processor.py`"
      ],
      "context_before": [
        "",
        "# In analysis.py",
        "col_entries  # Abbreviated",
        "column_count()  # Full name",
        "```",
        "",
        "---",
        "",
        "### 3.3 Boolean Parameter Name Confusion",
        ""
      ],
      "context_after": [
        "",
        "```python",
        "def find_documents_for_query(",
        "    ...",
        "    use_expansion: bool = True,",
        "    use_semantic: bool = True,",
        "    ...",
        ")",
        "```",
        ""
      ],
      "change_type": "modify"
    },
    {
      "file": "CODE_REVIEW.md",
      "function": "The term \"minicolumn\" comes from neuroscience (vertical columns of ~80-100 neuro",
      "start_line": 172,
      "lines_added": [
        "**File:** `cortical/processor/compute.py` (lines 220-420)",
        "The `compute_all()` method has highly repetitive checkpoint handling. The same pattern is repeated ~10 times:",
        "# Repeated pattern for each phase:",
        "def _run_phase(self, phase_name: str, compute_fn: Callable,",
        "               description: str, progress: MultiPhaseProgress,",
        "               completed_phases: Set[str], checkpoint_dir: Optional[str],",
        "               verbose: bool) -> None:",
        "    \"\"\"Execute a computation phase with checkpoint support.\"\"\"",
        "        if verbose:",
        "            logger.info(f\"  Skipping {description} (already checkpointed)\")",
        "        return",
        "    progress.start_phase(description)",
        "    if verbose:",
        "        logger.info(f\"Computing {description}...\")",
        "    compute_fn(verbose=False)",
        "    progress.update(100)",
        "    progress.complete_phase()",
        "    if checkpoint_dir:",
        "        self._save_checkpoint(checkpoint_dir, phase_name, verbose=verbose)",
        "### 4.2 Layer Access Pattern Duplication"
      ],
      "lines_removed": [
        "**File:** `cortical/processor.py` (lines 800-960)",
        "The `compute_all()` method has highly repetitive checkpoint handling:",
        "# Repeated pattern ~10 times:",
        "def _run_phase(self, phase_name, compute_fn, description, ...):",
        "        self._log_skip(phase_name)",
        "    else:",
        "        self._run_and_checkpoint(phase_name, compute_fn, description)",
        "```",
        "",
        "### 4.2 Input Validation Duplication",
        "",
        "**File:** `cortical/processor.py`",
        "",
        "Same validation pattern repeated in multiple methods:",
        "",
        "```python",
        "# Repeated in 10+ methods:",
        "if not isinstance(query_text, str) or not query_text.strip():",
        "    raise ValueError(\"...\")",
        "if not isinstance(top_n, int) or top_n < 1:",
        "    raise ValueError(\"...\")",
        "```",
        "**Recommendation:** Use the existing `validation.py` decorators more consistently:",
        "```python",
        "@validate_params(",
        "    query_text=lambda x: validate_non_empty_string(x, 'query_text'),",
        "    top_n=lambda x: validate_positive_int(x, 'top_n')",
        ")",
        "def find_documents_for_query(self, query_text: str, top_n: int = 5):",
        "    ...",
        "### 4.3 Layer Access Pattern Duplication"
      ],
      "context_before": [
        "**Issue:** The biological analogy breaks down at the document level - documents aren't \"mini\" anything.",
        "",
        "**Recommendation:** Consider renaming to more generic terms like `Node`, `Unit`, or `Feature` for the generic structure, with type-specific terms in documentation.",
        "",
        "---",
        "",
        "## 4. Code Duplication",
        "",
        "### 4.1 Checkpoint Handling Duplication",
        ""
      ],
      "context_after": [
        "",
        "",
        "```python",
        "phase_name = \"phase_x\"",
        "if phase_name in completed_phases:",
        "    if verbose:",
        "        logger.info(\"  Skipping X (already checkpointed)\")",
        "else:",
        "    progress.start_phase(\"X\")",
        "    if verbose:",
        "        logger.info(\"Computing X...\")",
        "    self.compute_x(verbose=False)",
        "    progress.update(100)",
        "    progress.complete_phase()",
        "    if checkpoint_dir:",
        "        self._save_checkpoint(checkpoint_dir, phase_name, verbose=verbose)",
        "```",
        "",
        "**Recommendation:** Extract to a helper method:",
        "```python",
        "    if phase_name in completed_phases:",
        "",
        "",
        "```",
        "",
        "---",
        "",
        "",
        "**Pattern:** Getting layer references is done inconsistently:",
        "",
        "```python",
        "# Pattern 1: Direct dictionary access",
        "layer0 = self.layers[CorticalLayer.TOKENS]",
        "",
        "# Pattern 2: Using get_layer method",
        "token_layer = self.get_layer(CorticalLayer.TOKENS)",
        ""
      ],
      "change_type": "modify"
    },
    {
      "file": "CODE_REVIEW.md",
      "function": "token_layer = self.get_layer(CorticalLayer.TOKENS)",
      "start_line": 252,
      "lines_added": [
        "### 5.1 Hardcoded Cache Size",
        "**File:** `cortical/processor/core.py:68`",
        "# processor/query_api.py",
        "### 6.1 Validation Decorators Underutilized",
        "**File:** `cortical/validation.py`",
        "A validation module exists with decorators like `@validate_params`, but only 3 usages are found in the codebase.",
        "**Current state:** Manual validation patterns are still repeated in multiple methods:",
        "# Repeated in multiple methods:",
        "if not isinstance(query_text, str) or not query_text.strip():",
        "    raise ValueError(\"...\")",
        "if not isinstance(top_n, int) or top_n < 1:",
        "    raise ValueError(\"...\")",
        "**Recommendation:** Use the existing `validation.py` decorators more consistently across the codebase.",
        "### 6.2 Comments That Should Be Code",
        "### 6.3 Inconsistent Error Messages",
        "### 6.4 Return Type Inconsistency",
        "",
        "Some methods return different structures for success vs failure:",
        "",
        "```python",
        "# MCP server returns dict with 'error' key on failure",
        "return {\"error\": str(e), \"results\": [], \"count\": 0}",
        "",
        "# But processor methods raise exceptions",
        "raise ValueError(\"doc_id must be a non-empty string\")",
        "```",
        "",
        "**Recommendation:** Be consistent - either always use exceptions or always use result objects for a given API surface.",
        "",
        "---",
        "",
        "The codebase demonstrates several good practices:",
        "1. **Modular Architecture:** CorticalTextProcessor split into focused mixins",
        "2. **Comprehensive Documentation:** Docstrings with Args, Returns, Examples",
        "3. **Type Hints:** Consistent use of typing annotations",
        "4. **Centralized Configuration:** `CorticalConfig` dataclass with validation",
        "5. **Separation of Concerns:** Query, analysis, persistence in separate modules",
        "6. **Backward Compatibility:** `from_dict` handles old formats gracefully",
        "7. **Test Coverage:** Extensive test suite with unit, integration, and behavioral tests",
        "8. **Validation Module:** Reusable validators in `validation.py`",
        "9. **Observability:** Built-in metrics and timing support via `observability.py`",
        "10. **Progress Tracking:** Multi-phase progress reporting for long operations",
        "### Resolved (since last review)",
        "1. ~~Extract functionality from `CorticalTextProcessor` into focused classes~~ **DONE** - Now uses mixin architecture",
        "",
        "1. Remove or properly deprecate `feedforward_sources`",
        "2. Standardize layer variable naming (use semantic names)",
        "3. Reduce checkpoint handling duplication with helper methods",
        "4. Use `validation.py` decorators consistently",
        "5. Move magic numbers to configuration",
        "6. Standardize error message format",
        "7. Consider renaming \"Minicolumn\" for non-neuroscience contexts",
        "| Metric | Previous | Current | Target |",
        "|--------|----------|---------|--------|",
        "| Largest processor file | 3115 lines | 1041 lines (compute.py) | < 500 lines |",
        "| Processor module files | 1 | 7 | - |",
        "| Methods in single class | 70+ | Distributed across mixins | < 20 per mixin |",
        "| Duplicate checkpoint blocks | ~15 | ~10 | 0 |",
        "| Deprecated code still used | 1 | 1 | 0 |",
        "| Query module files | 1 | 9 | - |",
        "| Total codebase size | ~11,100 lines | ~19,600 lines | - |",
        "",
        "---",
        "",
        "## Change History",
        "",
        "| Date | Change |",
        "|------|--------|",
        "| 2025-12-14 | Initial review |",
        "| 2025-12-15 | Updated to reflect processor package refactoring; God Class marked as RESOLVED |"
      ],
      "lines_removed": [
        "### 5.1 Hardcoded Thresholds",
        "**File:** `cortical/processor.py`",
        "# Line 145: Hardcoded window size",
        "for j in range(max(0, i-3), min(len(tokens), i+4)):  # Magic: 3, 4",
        "",
        "# Line 79: Cache size",
        "    lateral_window_size: int = 3",
        "# processor.py",
        "### 6.1 Long Parameter Lists",
        "",
        "**File:** `cortical/processor.py`",
        "",
        "```python",
        "def compute_all(",
        "    self,",
        "    verbose: bool = True,",
        "    show_progress: bool = True,",
        "    progress_callback: Optional[Callable[[str, float], None]] = None,",
        "    build_concepts: bool = True,",
        "    cluster_strictness: float = 1.0,",
        "    connection_strategy: str = 'hybrid',",
        "    bridge_weight: float = 0.5,",
        "    checkpoint_dir: Optional[str] = None",
        ") -> Dict[str, Any]:",
        "```",
        "",
        "**Issue:** 8 parameters is difficult to remember and use correctly.",
        "",
        "**Recommendation:** Use a configuration object:",
        "```python",
        "@dataclass",
        "class ComputeOptions:",
        "    verbose: bool = True",
        "    show_progress: bool = True",
        "    build_concepts: bool = True",
        "    cluster_strictness: float = 1.0",
        "    connection_strategy: str = 'hybrid'",
        "    bridge_weight: float = 0.5",
        "    checkpoint_dir: Optional[str] = None",
        "",
        "def compute_all(self, options: Optional[ComputeOptions] = None):",
        "    options = options or ComputeOptions()",
        "```",
        "",
        "",
        "### 6.2 Boolean Parameter Confusion",
        "",
        "**File:** `cortical/processor.py`",
        "",
        "```python",
        "# What does this call do?",
        "processor.compute_all(True, True, None, True, 1.0, 'hybrid', 0.5, None)",
        "```",
        "",
        "**Issue:** Positional booleans are unreadable.",
        "**Recommendation:** Always use keyword arguments for booleans:",
        "```python",
        "processor.compute_all(",
        "    verbose=True,",
        "    show_progress=True,",
        "    build_concepts=True",
        ")",
        "```",
        "",
        "### 6.3 Return Type Inconsistency",
        "",
        "Some methods return different structures for success vs failure:",
        "# MCP server returns dict with 'error' key on failure",
        "return {\"error\": str(e), \"results\": [], \"count\": 0}",
        "",
        "# But processor methods raise exceptions",
        "raise ValueError(\"doc_id must be a non-empty string\")",
        "**Recommendation:** Be consistent - either always use exceptions or always use result objects.",
        "### 6.4 Comments That Should Be Code",
        "### 6.5 Dead Code: Unused Imports",
        "",
        "**File:** Various",
        "",
        "```python",
        "# processor.py line 418 - imports inside function",
        "from .layers import CorticalLayer  # Already imported at top of file",
        "```",
        "",
        "",
        "### 6.6 Inconsistent Error Messages",
        "Despite the issues above, the codebase demonstrates several good practices:",
        "1. **Comprehensive Documentation:** Docstrings with Args, Returns, Examples",
        "2. **Type Hints:** Consistent use of typing annotations",
        "3. **Centralized Configuration:** `CorticalConfig` dataclass with validation",
        "4. **Separation of Concerns:** Query, analysis, persistence in separate modules",
        "5. **Backward Compatibility:** `from_dict` handles old formats gracefully",
        "6. **Test Coverage:** Extensive test suite with unit and integration tests",
        "7. **Validation Module:** Reusable validators in `validation.py`",
        "1. Extract functionality from `CorticalTextProcessor` into focused classes",
        "2. Remove or properly deprecate `feedforward_sources`",
        "3. Standardize layer variable naming (use semantic names)",
        "4. Reduce checkpoint handling duplication with helper methods",
        "5. Use `validation.py` decorators consistently",
        "6. Move magic numbers to configuration",
        "7. Standardize error message format",
        "8. Consider renaming \"Minicolumn\" for non-neuroscience contexts",
        "| Metric | Value | Target |",
        "|--------|-------|--------|",
        "| Largest file (processor.py) | 3115 lines | < 500 lines |",
        "| Methods in CorticalTextProcessor | 70+ | < 20 |",
        "| Duplicate validation blocks | ~15 | 0 |",
        "| Deprecated code still used | 1 | 0 |"
      ],
      "context_before": [
        "from .layers import CorticalLayer",
        "layer0 = layers[CorticalLayer.TOKENS]",
        "```",
        "",
        "**Recommendation:** Standardize on one approach, preferably using `get_layer()` for consistency and future extensibility.",
        "",
        "---",
        "",
        "## 5. Magic Numbers",
        ""
      ],
      "context_after": [
        "",
        "",
        "```python",
        "self._query_cache_max_size: int = 100  # Magic: 100",
        "```",
        "",
        "**Recommendation:** Move to `CorticalConfig`:",
        "```python",
        "@dataclass",
        "class CorticalConfig:",
        "    query_cache_max_size: int = 100",
        "```",
        "",
        "---",
        "",
        "### 5.2 Scattered Default Values",
        "",
        "Default values are scattered throughout the codebase:",
        "",
        "```python",
        "def find_documents_for_query(..., doc_name_boost: float = 2.0):",
        "",
        "# query/search.py (same function)",
        "def find_documents_for_query(..., doc_name_boost: float = 2.0):",
        "",
        "# query/ranking.py",
        "candidate_multiplier: int = 3  # Default here too",
        "```",
        "",
        "**Issue:** If defaults need to change, multiple files must be updated.",
        "",
        "**Recommendation:** Centralize in `CorticalConfig` and reference from there.",
        "",
        "---",
        "",
        "## 6. Clean Code Issues",
        "",
        "",
        "",
        "",
        "```python",
        "```",
        "",
        "",
        "---",
        "",
        "",
        "**File:** `cortical/minicolumn.py:390-391`",
        "",
        "```python",
        "# Also maintain legacy feedforward_sources for backward compatibility",
        "self.feedforward_sources.add(target_id)",
        "```",
        "",
        "**Issue:** The comment explains what the code does, not why. The deprecation status should be in a migration plan, not a comment.",
        "",
        "---",
        "",
        "",
        "```python",
        "# Some use 'must be'",
        "raise ValueError(\"doc_id must be a non-empty string\")",
        "",
        "# Some use 'is required'",
        "raise ValueError(\"query_text is required\")",
        "",
        "# Some include type info",
        "raise ValueError(f\"{param_name} must be a string, got {type(value).__name__}\")",
        "",
        "# Some don't",
        "raise ValueError(\"content must be a string\")",
        "```",
        "",
        "**Recommendation:** Standardize error message format.",
        "",
        "---",
        "",
        "## 7. Good Practices Observed",
        "",
        "",
        "",
        "---",
        "",
        "## Recommendations Summary",
        "",
        "### High Priority",
        "",
        "### Medium Priority",
        "",
        "### Low Priority",
        "",
        "---",
        "",
        "## Metrics",
        ""
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 3,
  "day_of_week": "Monday",
  "seconds_since_last_commit": -36866,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}