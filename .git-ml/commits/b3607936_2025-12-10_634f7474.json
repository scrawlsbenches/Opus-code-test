{
  "hash": "b36079368dc21170a284571831a49bdf5ba75c71",
  "message": "Update documentation for incremental indexing features",
  "author": "Claude",
  "timestamp": "2025-12-10 20:40:00 +0000",
  "branch": "claude/multi-index-design-DvifZ",
  "files_changed": [
    ".claude/skills/corpus-indexer/SKILL.md",
    "CLAUDE.md"
  ],
  "insertions": 66,
  "deletions": 18,
  "hunks": [
    {
      "file": ".claude/skills/corpus-indexer/SKILL.md",
      "function": "allowed-tools: Bash",
      "start_line": 7,
      "lines_added": [
        "## Quick Commands",
        "# Fast incremental update (only changed files, ~2s)",
        "python scripts/index_codebase.py --incremental",
        "",
        "# Check what would be indexed without doing it",
        "python scripts/index_codebase.py --status",
        "",
        "# Full rebuild (still fast, ~2s)",
        "",
        "# Force full rebuild even if no changes detected",
        "python scripts/index_codebase.py --force",
        "## Options",
        "| Option | Description |",
        "|--------|-------------|",
        "| `--incremental`, `-i` | Only re-index changed files (fastest) |",
        "| `--status`, `-s` | Show what would change without indexing |",
        "| `--force`, `-f` | Force full rebuild even if up-to-date |",
        "| `--verbose`, `-v` | Show per-file progress |",
        "| `--log FILE`, `-l FILE` | Write detailed log to file |",
        "| `--timeout N`, `-t N` | Timeout in seconds (default: 300) |",
        "| `--full-analysis` | Use complete semantic analysis (slower) |",
        "| `--output FILE`, `-o FILE` | Custom output path (default: corpus_dev.pkl) |",
        "## Examples",
        "# Standard incremental update",
        "python scripts/index_codebase.py --incremental",
        "",
        "# Verbose with logging (good for debugging)",
        "python scripts/index_codebase.py --verbose --log index.log",
        "# See what files changed",
        "python scripts/index_codebase.py --status",
        "# Full semantic analysis (takes longer, more accurate)",
        "python scripts/index_codebase.py --full-analysis",
        "- Intelligence docs in `docs/` directory",
        "- Concept clusters (in full-analysis mode)",
        "- Semantic relations (in full-analysis mode)",
        "",
        "## Manifest File",
        "",
        "The indexer creates `corpus_dev.manifest.json` to track file modification times.",
        "This enables fast incremental updates by detecting only changed files.",
        "",
        "## Performance",
        "",
        "| Mode | Time | Use Case |",
        "|------|------|----------|",
        "| Incremental | ~1-2s | After small edits |",
        "| Full rebuild (fast) | ~2-3s | Default mode |",
        "| Full analysis | ~10+ min | Complete semantic analysis |",
        "- Use `--incremental` for quick updates during development",
        "- Use `--status` to check if re-indexing is needed",
        "- Use `--force` after major refactoring",
        "- Use `--full-analysis` before deep exploration sessions"
      ],
      "lines_removed": [
        "## Index the Codebase",
        "### Options",
        "- `--output FILE` or `-o FILE`: Custom output path (default: corpus_dev.pkl)",
        "- `--verbose` or `-v`: Show detailed indexing progress",
        "### Example",
        "# Standard indexing",
        "python scripts/index_codebase.py",
        "# Verbose output to see what's being indexed",
        "python scripts/index_codebase.py --verbose",
        "# Custom output location",
        "python scripts/index_codebase.py --output my_corpus.pkl",
        "- Concept clusters",
        "- Semantic relations extracted",
        "Re-index periodically to keep search accurate:",
        "- After adding new modules",
        "- After major refactoring",
        "- Before deep codebase exploration sessions"
      ],
      "context_before": [
        "",
        "This skill manages the codebase index used by the semantic search system.",
        "",
        "## When to Use",
        "",
        "- After adding new files to the codebase",
        "- After significant code changes",
        "- When search results seem outdated",
        "- To verify indexing statistics",
        ""
      ],
      "context_after": [
        "",
        "```bash",
        "python scripts/index_codebase.py",
        "```",
        "",
        "",
        "",
        "",
        "```bash",
        "",
        "",
        "```",
        "",
        "## What Gets Indexed",
        "",
        "The indexer processes:",
        "- All Python files in `cortical/` (source code)",
        "- All Python files in `tests/` (test code)",
        "- Documentation: `CLAUDE.md`, `TASK_LIST.md`, `README.md`, `KNOWLEDGE_TRANSFER.md`",
        "",
        "## Output Statistics",
        "",
        "After indexing, you'll see:",
        "- Number of documents indexed",
        "- Total lines of code",
        "- Token count (unique terms)",
        "- Bigram count (word pairs)",
        "",
        "## Maintenance",
        ""
      ],
      "change_type": "modify"
    },
    {
      "file": "CLAUDE.md",
      "function": "for t1, rel, t2, weight in processor.semantic_relations[:10]:",
      "start_line": 347,
      "lines_added": [
        "# Index the codebase (creates corpus_dev.pkl, ~2s)",
        "# Incremental update (only changed files)",
        "python scripts/index_codebase.py --incremental",
        "",
        "### Indexer Options",
        "",
        "| Option | Description |",
        "|--------|-------------|",
        "| `--incremental`, `-i` | Only re-index changed files (fastest) |",
        "| `--status`, `-s` | Show what would change without indexing |",
        "| `--force`, `-f` | Force full rebuild |",
        "| `--log FILE` | Write detailed log to file |",
        "| `--verbose`, `-v` | Show per-file progress |",
        ""
      ],
      "lines_removed": [
        "# Index the codebase (creates corpus_dev.pkl)"
      ],
      "context_before": [
        "",
        "---",
        "",
        "## Dog-Fooding: Search the Codebase",
        "",
        "The Cortical Text Processor can index and search its own codebase, providing semantic search capabilities during development.",
        "",
        "### Quick Start",
        "",
        "```bash"
      ],
      "context_after": [
        "python scripts/index_codebase.py",
        "",
        "# Search for code",
        "python scripts/search_codebase.py \"PageRank algorithm\"",
        "python scripts/search_codebase.py \"bigram separator\" --verbose",
        "python scripts/search_codebase.py --interactive",
        "```",
        "",
        "### Claude Skills",
        "",
        "Two skills are available in `.claude/skills/`:",
        "",
        "1. **codebase-search**: Search the indexed codebase for code patterns and implementations",
        "2. **corpus-indexer**: Re-index the codebase after making changes",
        "",
        "### Search Options",
        "",
        "| Option | Description |",
        "|--------|-------------|",
        "| `--top N` | Number of results (default: 5) |",
        "| `--verbose` | Show full passage text |",
        "| `--expand` | Show query expansion terms |",
        "| `--interactive` | Interactive search mode |",
        "",
        "### Interactive Mode Commands"
      ],
      "change_type": "modify"
    }
  ],
  "hour_of_day": 20,
  "day_of_week": "Wednesday",
  "seconds_since_last_commit": -407088,
  "is_merge": false,
  "is_initial": false,
  "parent_count": 1,
  "session_id": null,
  "related_chats": [],
  "ci_result": null,
  "reverted": false,
  "amended": false
}