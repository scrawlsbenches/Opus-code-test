{"action_type":"edit","context":{"input":{"input":{"content":"# Git Sync Skill\n\nSafely synchronize with remote branch, handling edge cases like conflicts and interrupted operations.\n\n## Usage\n\nWhen the user says \"pull from main\", \"sync with remote\", \"git sync\", or similar:\n\n1. First, check the current git state\n2. If in a bad state (rebase conflict, detached HEAD, etc.), offer recovery\n3. Run the sync script with appropriate mode\n\n## Steps\n\n### Step 1: Diagnose Current State\n\nRun these checks in order:\n\n```bash\n# Check for rebase in progress\nif [ -d .git/rebase-merge ] || [ -d .git/rebase-apply ]; then\n    echo \"REBASE_IN_PROGRESS\"\nfi\n\n# Check for merge in progress\nif [ -f .git/MERGE_HEAD ]; then\n    echo \"MERGE_IN_PROGRESS\"\nfi\n\n# Check for detached HEAD\nif ! git symbolic-ref -q HEAD >/dev/null; then\n    echo \"DETACHED_HEAD\"\nfi\n\n# Check working tree status\ngit status --porcelain\n```\n\n### Step 2: Recovery (if needed)\n\n**If REBASE_IN_PROGRESS:**\n- Ask user: \"Rebase in progress. Options: (1) Abort rebase, (2) Continue rebase, (3) Show status\"\n- Default for auto mode: abort rebase with `git rebase --abort`\n\n**If MERGE_IN_PROGRESS:**\n- Ask user: \"Merge in progress. Options: (1) Abort merge, (2) Continue merge\"\n- Default for auto mode: abort merge with `git merge --abort`\n\n**If DETACHED_HEAD:**\n- Ask user: \"Detached HEAD. Options: (1) Checkout previous branch, (2) Create new branch\"\n- Show: `git reflog -5` to help identify where they were\n- Default for auto mode: `git checkout -` (previous branch)\n\n### Step 3: Run Sync\n\nAfter recovery (or if state was clean):\n\n```bash\n./scripts/git-sync-ml.sh --auto\n```\n\nOr for more control:\n```bash\n./scripts/git-sync-ml.sh --semi\n```\n\n### Step 4: Verify\n\nAfter sync, always verify:\n```bash\ngit status\ngit log --oneline -3\n```\n\nConfirm to user: \"Sync complete. You are on branch X, up to date with origin/X\"\n\n## Important Notes\n\n- NEVER check filesystem for file existence during git conflicts\n- ALWAYS resolve git state FIRST, then verify files\n- The sync script handles ML data conflicts automatically\n- If non-ML files have conflicts, pause and ask user\n\n## Recovery Commands Reference\n\n```bash\n# Abort operations\ngit rebase --abort\ngit merge --abort\ngit cherry-pick --abort\n\n# Reset to remote (DESTRUCTIVE - loses local changes)\ngit fetch origin\ngit reset --hard origin/BRANCH\n\n# Reset to remote but keep local changes\ngit fetch origin\ngit stash\ngit reset --hard origin/BRANCH\ngit stash pop\n\n# Checkout previous branch\ngit checkout -\n\n# See recent history\ngit reflog -10\n```\n","file_path":"/home/user/Opus-code-test/.claude/skills/git-sync/SKILL.md"},"tool":"Write"},"tool":"Write"},"id":"A-20251216-224501-5586-015","result_summary":null,"session_id":"5586ac76-a969-4514-8ed9-333056ff0787","success":true,"target":"","timestamp":"2025-12-16T22:27:32.427Z"}