---
title: "Architecture Lessons"
generated: "2025-12-17T00:26:16.964397Z"
generator: "lessons"
source_files:
  - "git log --grep=architecture"
tags:
  - lessons
  - architecture
  - experience
---

# Architecture Lessons

*How we evolved the code structure over time.*

---

## Overview

This chapter captures **10 lessons** from architecture work. Each entry shows the problem, the solution, and the principle we extracted.

### Complete legacy task system cleanup

**Commit:** `8dedda6`  
**Date:** 2025-12-16  
**Files Changed:** 4  
  - `docs/archive/migrate_legacy_tasks.py`
  - `scripts/select_task.py`
  - `scripts/task_graph.py`
  - *(and 1 more)*

**The Lesson:** Maintain clear structure. The lesson? Complete legacy task system cleanup

### Feat: Add Cortical Chronicles book infrastructure (Wave 1)

**Commit:** `c730057`  
**Date:** 2025-12-16  
**Files Changed:** 13  
  - `.git-ml/current_session.json`
  - `.git-ml/tracked/commits.jsonl`
  - `book/00-preface/.gitkeep`
  - *(and 10 more)*
**Changes:** +434/-0 lines  

**The Lesson:** Maintain clear structure. The lesson? feat: Add Cortical Chronicles book infrastructure (Wave 1)

### Remove unused protobuf serialization (T-013 f0ff)

**Commit:** `d7a98ae`  
**Date:** 2025-12-16  
**Files Changed:** 6  
  - `cortical/persistence.py`
  - `cortical/proto/__init__.py`
  - `cortical/proto/schema.proto`
  - *(and 3 more)*
**Changes:** +100/-1460 lines  

**The Lesson:** Maintain clear structure. The lesson? Remove unused protobuf serialization (T-013 f0ff)

### Data: Add orchestration extraction data from quality audit session

**Commit:** `c85c668`  
**Date:** 2025-12-16  
**Files Changed:** 1  
  - `.git-ml/tracked/orchestration.jsonl`
**Changes:** +1/-0 lines  

**The Lesson:** Keep modules focused. The lesson? data: Add orchestration extraction data from quality audit session

### Data: Add orchestration extraction data for ML training

**Commit:** `bb75148`  
**Date:** 2025-12-15  
**Files Changed:** 1  
  - `.git-ml/orchestration/05c8c5d9-75c6-4267-9fef-1d5573ba201b_orchestration.json`
**Changes:** +66/-0 lines  

**The Lesson:** Keep modules focused. The lesson? data: Add orchestration extraction data for ML training

### Feat: Add orchestration extraction for director sub-agent tracking

**Commit:** `4eaeb37`  
**Date:** 2025-12-15  
**Files Changed:** 4  
  - `.gitignore`
  - `scripts/ml_collector/__init__.py`
  - `scripts/ml_collector/orchestration.py`
  - *(and 1 more)*

**The Lesson:** Keep modules focused. The lesson? feat: Add orchestration extraction for director sub-agent tracking

### Split large files exceeding 25000 token limit

**Commit:** `21ec5ea`  
**Date:** 2025-12-15  
**Files Changed:** 36  
  - `.refactor-backup/BACKUP_PLAN.md`
  - `.refactor-backup/analysis.py`
  - `.refactor-backup/ml_data_collector.py`
  - *(and 33 more)*

**The Lesson:** Keep modules focused. The lesson? Split large files exceeding 25000 token limit

### Consolidate ML data to single JSONL files

**Commit:** `205fe34`  
**Date:** 2025-12-15  
**Files Changed:** 486  
  - `.git-ml/commits-lite/0039ad5b13fb_2025-12-11.json`
  - `.git-ml/commits-lite/00f88d48ab42_2025-12-14.json`
  - `.git-ml/commits-lite/051d20028ddd_2025-12-13.json`
  - *(and 483 more)*
**Changes:** +658/-12208 lines  

**The Lesson:** Maintain clear structure. The lesson? Consolidate ML data to single JSONL files

### Feat: Add ML data collection infrastructure for project-specific micro-model

**Commit:** `1568f3c`  
**Date:** 2025-12-15  
**Files Changed:** 4  
  - `.claude/hooks/session_logger.py`
  - `.claude/skills/ml-logger/SKILL.md`
  - `.gitignore`
  - *(and 1 more)*
**Changes:** +1039/-0 lines  

**The Lesson:** Maintain clear structure. The lesson? feat: Add ML data collection infrastructure for project-specific micro-model

### Clean up directory structure and queue search relevance fixes

**Commit:** `cd8b9f5`  
**Date:** 2025-12-14  
**Files Changed:** 5  
  - `IMPLEMENTATION_SUMMARY.md`
  - `docs/PATTERN_DETECTION_GUIDE.md`
  - `examples/demo_pattern_detection.py`
  - *(and 2 more)*
**Changes:** +68/-293 lines  

**The Lesson:** Maintain clear structure. The lesson? Clean up directory structure and queue search relevance fixes

---

*This chapter is part of [The Cortical Chronicles](../README.md), a self-documenting book generated by the Cortical Text Processor.*
