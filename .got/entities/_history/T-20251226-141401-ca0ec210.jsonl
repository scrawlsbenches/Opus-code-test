{"data": {"created_at": "2025-12-26T14:14:01.690946+00:00", "description": "## Problem\nVersionedStore._entity_from_dict() (versioned_store.py:514-549) dispatches on entity_type field but doesn't validate it against a known enum. A malformed entity_type could cause silent failures.\n\n## Current State\n```python\ndef _entity_from_dict(self, data: dict) -> Entity:\n    entity_type = data.get('entity_type')\n    if entity_type == 'task':\n        return Task.from_dict(data)\n    elif entity_type == 'decision':\n        return Decision.from_dict(data)\n    # ... etc\n    else:\n        # Falls through with no error!\n        raise ValueError(f\"Unknown entity_type: {entity_type}\")  # Add this\n```\n\n## Solution\n1. Define VALID_ENTITY_TYPES enum or frozenset\n2. Validate entity_type before dispatch\n3. Raise clear error for unknown types\n4. Log warning for missing entity_type field\n\n## Files\n- cortical/got/versioned_store.py:514-549\n- cortical/got/types.py (add EntityType enum)\n\n## Acceptance Criteria\n1. Unknown entity_type raises ValueError with helpful message\n2. Missing entity_type raises ValueError\n3. Valid entity types documented in single location\n4. Tests for deserialization of invalid entities", "entity_type": "task", "id": "T-20251226-141401-ca0ec210", "metadata": {}, "modified_at": "2025-12-26T14:14:01.694015+00:00", "priority": "medium", "properties": {"category": "feature"}, "status": "pending", "title": "Add entity_type validation on deserialize", "version": 2}, "global_version": 1216, "timestamp": "2025-12-26T16:08:30.986245+00:00"}
{"data": {"created_at": "2025-12-26T14:14:01.690946+00:00", "description": "## Problem\nVersionedStore._entity_from_dict() (versioned_store.py:514-549) dispatches on entity_type field but doesn't validate it against a known enum. A malformed entity_type could cause silent failures.\n\n## Current State\n```python\ndef _entity_from_dict(self, data: dict) -> Entity:\n    entity_type = data.get('entity_type')\n    if entity_type == 'task':\n        return Task.from_dict(data)\n    elif entity_type == 'decision':\n        return Decision.from_dict(data)\n    # ... etc\n    else:\n        # Falls through with no error!\n        raise ValueError(f\"Unknown entity_type: {entity_type}\")  # Add this\n```\n\n## Solution\n1. Define VALID_ENTITY_TYPES enum or frozenset\n2. Validate entity_type before dispatch\n3. Raise clear error for unknown types\n4. Log warning for missing entity_type field\n\n## Files\n- cortical/got/versioned_store.py:514-549\n- cortical/got/types.py (add EntityType enum)\n\n## Acceptance Criteria\n1. Unknown entity_type raises ValueError with helpful message\n2. Missing entity_type raises ValueError\n3. Valid entity types documented in single location\n4. Tests for deserialization of invalid entities", "entity_type": "task", "id": "T-20251226-141401-ca0ec210", "metadata": {"started_at": "2025-12-26T16:08:30.980442+00:00", "updated_at": "2025-12-26T16:08:30.980465+00:00"}, "modified_at": "2025-12-26T16:08:30.987273+00:00", "priority": "medium", "properties": {"category": "feature"}, "status": "in_progress", "title": "Add entity_type validation on deserialize", "version": 4}, "global_version": 1217, "timestamp": "2025-12-26T16:13:04.931620+00:00"}
